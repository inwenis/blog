
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../../category/scripting/">
      
      
        <link rel="next" href="../2023/">
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.0, mkdocs-material-9.5.26">
    
    
      
        <title>2024 - programki.eu</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.6543a935.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      
  


  
  

<script id="__analytics">function __md_analytics(){function n(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],n("js",new Date),n("config","G-MZ0JN1EDPS"),document.addEventListener("DOMContentLoaded",function(){document.forms.search&&document.forms.search.query.addEventListener("blur",function(){this.value&&n("event","search",{search_term:this.value})}),document$.subscribe(function(){var a=document.forms.feedback;if(void 0!==a)for(var e of a.querySelectorAll("[type=submit]"))e.addEventListener("click",function(e){e.preventDefault();var t=document.location.pathname,e=this.getAttribute("data-md-value");n("event","feedback",{page:t,data:e}),a.firstElementChild.disabled=!0;e=a.querySelector(".md-feedback__note [data-md-value='"+e+"']");e&&(e.hidden=!1)}),a.hidden=!1}),location$.subscribe(function(e){n("config","G-MZ0JN1EDPS",{page_path:e.pathname})})});var e=document.createElement("script");e.async=!0,e.src="https://www.googletagmanager.com/gtag/js?id=G-MZ0JN1EDPS",document.getElementById("__analytics").insertAdjacentElement("afterEnd",e)}</script>
  
    <script>"undefined"!=typeof __md_analytics&&__md_analytics()</script>
  

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#2024" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="programki.eu" class="md-header__button md-logo" aria-label="programki.eu" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            programki.eu
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              2024
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="programki.eu" class="md-nav__button md-logo" aria-label="programki.eu" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    programki.eu
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Blog
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Archive
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Archive
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
    
      
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    2024
  </span>
  

      </a>
      
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../2023/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2023
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../2022/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2022
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../2021/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2021
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Categories
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Categories
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../category/f-sharp/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    F Sharp
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../category/general-coding/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    General coding
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../category/https/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    HTTPS
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../category/powershell/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    PowerShell
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../category/ssl/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    SSL
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../category/team-lead/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Team lead
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../category/tools/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Tools
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../category/axios/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    axios
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../category/bash/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    bash
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../category/certificates/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    certificates
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../category/cookies/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    cookies
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../category/dependencies/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    dependencies
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../category/exercises/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    exercises
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../category/js/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    js
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../category/keys/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    keys
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../category/node/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    node
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../category/npm/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    npm
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../category/scripting/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    scripting
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
  <div class="md-content" data-md-component="content">
    <div class="md-content__inner">
      <header class="md-typeset">
        <h1 id="2024">2024</h1>
      </header>
      
        <article class="md-post md-post--excerpt">
  <header class="md-post__header">
    
    <div class="md-post__meta md-meta">
      <ul class="md-meta__list">
        <li class="md-meta__item">
          <time datetime="2024-06-30 00:00:00">June 30, 2024</time></li>
        
          <li class="md-meta__item">
            in
            
              <a href="../../category/tools/" class="md-meta__link">Tools</a>, 
              <a href="../../category/general-coding/" class="md-meta__link">General coding</a></li>
        
        
          
          <li class="md-meta__item">
            
              1 min read
            
          </li>
        
      </ul>
      
    </div>
  </header>
  <div class="md-post__content md-typeset">
    <h2 id="my-recommendations"><a class="toclink" href="../../2024/06/30/my-recommendations/">My recommendations</a></h2>
<h3 id="terminal-etc"><a class="toclink" href="../../2024/06/30/my-recommendations/#terminal-etc">Terminal etc.</a></h3>
<ul>
<li><a href="https://github.com/PowerShell/PowerShell">https://github.com/PowerShell/PowerShell</a> - PowerShell 7+ - faster &amp; better then Windows PowerShell</li>
<li><a href="https://ohmyposh.dev/">https://ohmyposh.dev/</a> - amazing prompts - replace that old <code>$</code> sign with amazing stuff</li>
<li><a href="https://github.com/dahlbyk/posh-git">https://github.com/dahlbyk/posh-git</a> - offers a prompt for git repos. Comes bundled with <code>oh-my-posh</code> for PowerShell. Use <code>oh-my-posh</code> prompt and <code>posh-git</code> for autocompletion.</li>
</ul>
<h3 id="git"><a class="toclink" href="../../2024/06/30/my-recommendations/#git">git</a></h3>
<ul>
<li><a href="https://www.toptal.com/developers/gitignore">https://www.toptal.com/developers/gitignore</a> - .gitignore files for your project</li>
<li><a href="https://rtyley.github.io/bfg-repo-cleaner/">https://rtyley.github.io/bfg-repo-cleaner/</a> - remove password from git history &amp; more</li>
</ul>
<h3 id="node"><a class="toclink" href="../../2024/06/30/my-recommendations/#node">node</a></h3>
<ul>
<li><a href="https://github.com/nvm-sh/nvm">https://github.com/nvm-sh/nvm</a> - node version manager - install several versions of node and switch between them</li>
<li><a href="https://github.com/coreybutler/nvm-windows">https://github.com/coreybutler/nvm-windows</a> - same as ^ but for windows</li>
</ul>
<h3 id="http"><a class="toclink" href="../../2024/06/30/my-recommendations/#http">http</a></h3>
<ul>
<li><a href="https://www.telerik.com/fiddler/fiddler-classic">https://www.telerik.com/fiddler/fiddler-classic</a> - inspect http traffic/modify &amp; replay requests</li>
</ul>
    
  </div>
</article>
      
        <article class="md-post md-post--excerpt">
  <header class="md-post__header">
    
    <div class="md-post__meta md-meta">
      <ul class="md-meta__list">
        <li class="md-meta__item">
          <time datetime="2024-06-24 00:00:00">June 24, 2024</time></li>
        
          <li class="md-meta__item">
            in
            
              <a href="../../category/powershell/" class="md-meta__link">PowerShell</a></li>
        
        
          
          <li class="md-meta__item">
            
              3 min read
            
          </li>
        
      </ul>
      
    </div>
  </header>
  <div class="md-post__content md-typeset">
    <h2 id="powershell-quirk"><a class="toclink" href="../../2024/06/24/powershell-quirk/">PowerShell quirk</a></h2>
<h3 id="tldr"><a class="toclink" href="../../2024/06/24/powershell-quirk/#tldr">tl;dr</a></h3>
<p>In PowerShell if you want to return an array instead of one element of the array at the time do this:
<div class="language-PowerShell highlight"><pre><span></span><code><span id="__span-8-1"><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a><span class="p">&gt;</span> <span class="p">@(</span><span class="n">1</span><span class="p">..</span><span class="n">2</span><span class="p">)</span> <span class="p">|</span> <span class="p">%</span> <span class="p">{</span> <span class="nv">$a</span> <span class="p">=</span> <span class="s2">&quot;a&quot;</span> <span class="p">*</span> <span class="nv">$_</span><span class="p">;</span> <span class="p">@(</span><span class="nv">$a</span><span class="p">,</span><span class="nv">$_</span><span class="p">)</span> <span class="p">}</span> <span class="c"># wrong! will pipe/return 1 element at a time</span>
</span><span id="__span-8-2"><a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a><span class="p">&gt;</span> <span class="p">@(</span><span class="n">1</span><span class="p">..</span><span class="n">2</span><span class="p">)</span> <span class="p">|</span> <span class="p">%</span> <span class="p">{</span> <span class="nv">$a</span> <span class="p">=</span> <span class="s2">&quot;a&quot;</span> <span class="p">*</span> <span class="nv">$_</span><span class="p">;</span> <span class="p">,@(</span><span class="nv">$a</span><span class="p">,</span><span class="nv">$_</span><span class="p">)</span> <span class="p">}</span> <span class="c"># correct! will pipe/return pairs</span>
</span></code></pre></div>
<strong>Beware! Result of both snippets will be displayed in the exact same way even though they have different types!</strong>
See below:
<div class="language-PowerShell highlight"><pre><span></span><code><span id="__span-9-1"><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a><span class="p">&gt;</span> <span class="p">@(</span><span class="n">1</span><span class="p">,</span><span class="n">2</span><span class="p">,</span><span class="n">3</span><span class="p">,</span><span class="n">4</span><span class="p">)</span>
</span><span id="__span-9-2"><a id="__codelineno-9-2" name="__codelineno-9-2" href="#__codelineno-9-2"></a><span class="n">1</span>
</span><span id="__span-9-3"><a id="__codelineno-9-3" name="__codelineno-9-3" href="#__codelineno-9-3"></a><span class="n">2</span>
</span><span id="__span-9-4"><a id="__codelineno-9-4" name="__codelineno-9-4" href="#__codelineno-9-4"></a><span class="n">3</span>
</span><span id="__span-9-5"><a id="__codelineno-9-5" name="__codelineno-9-5" href="#__codelineno-9-5"></a><span class="n">4</span>
</span><span id="__span-9-6"><a id="__codelineno-9-6" name="__codelineno-9-6" href="#__codelineno-9-6"></a><span class="p">&gt;</span> <span class="p">@((</span><span class="n">1</span><span class="p">,</span><span class="n">2</span><span class="p">),(</span><span class="n">3</span><span class="p">,</span><span class="n">4</span><span class="p">))</span>
</span><span id="__span-9-7"><a id="__codelineno-9-7" name="__codelineno-9-7" href="#__codelineno-9-7"></a><span class="n">1</span>
</span><span id="__span-9-8"><a id="__codelineno-9-8" name="__codelineno-9-8" href="#__codelineno-9-8"></a><span class="n">2</span>
</span><span id="__span-9-9"><a id="__codelineno-9-9" name="__codelineno-9-9" href="#__codelineno-9-9"></a><span class="n">3</span>
</span><span id="__span-9-10"><a id="__codelineno-9-10" name="__codelineno-9-10" href="#__codelineno-9-10"></a><span class="n">4</span>
</span></code></pre></div></p>
<p>To check actual types:
<div class="language-PowerShell highlight"><pre><span></span><code><span id="__span-10-1"><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a><span class="p">&gt;</span> <span class="nv">$x</span> <span class="p">=</span> <span class="p">@(</span><span class="n">1</span><span class="p">..</span><span class="n">2</span><span class="p">)</span> <span class="p">|</span> <span class="p">%</span> <span class="p">{</span> <span class="nv">$a</span> <span class="p">=</span> <span class="s2">&quot;a&quot;</span> <span class="p">*</span> <span class="nv">$_</span><span class="p">;</span> <span class="p">@(</span><span class="nv">$a</span><span class="p">,</span><span class="nv">$_</span><span class="p">)</span> <span class="p">}</span> <span class="p">;</span> <span class="nv">$x</span><span class="p">.</span><span class="n">GetType</span><span class="p">().</span><span class="n">Name</span> <span class="p">;</span> <span class="nv">$x</span><span class="p">[</span><span class="n">0</span><span class="p">].</span><span class="n">GetType</span><span class="p">().</span><span class="n">Name</span> <span class="p">;</span> <span class="nv">$x</span>
</span><span id="__span-10-2"><a id="__codelineno-10-2" name="__codelineno-10-2" href="#__codelineno-10-2"></a><span class="p">&gt;</span> <span class="nv">$x</span> <span class="p">=</span> <span class="p">@(</span><span class="n">1</span><span class="p">..</span><span class="n">2</span><span class="p">)</span> <span class="p">|</span> <span class="p">%</span> <span class="p">{</span> <span class="nv">$a</span> <span class="p">=</span> <span class="s2">&quot;a&quot;</span> <span class="p">*</span> <span class="nv">$_</span><span class="p">;</span> <span class="p">,@(</span><span class="nv">$a</span><span class="p">,</span><span class="nv">$_</span><span class="p">)</span> <span class="p">}</span> <span class="p">;</span> <span class="nv">$x</span><span class="p">.</span><span class="n">GetType</span><span class="p">().</span><span class="n">Name</span> <span class="p">;</span> <span class="nv">$x</span><span class="p">[</span><span class="n">0</span><span class="p">].</span><span class="n">GetType</span><span class="p">().</span><span class="n">Name</span> <span class="p">;</span> <span class="nv">$x</span>
</span><span id="__span-10-3"><a id="__codelineno-10-3" name="__codelineno-10-3" href="#__codelineno-10-3"></a><span class="c"># Alternatively</span>
</span><span id="__span-10-4"><a id="__codelineno-10-4" name="__codelineno-10-4" href="#__codelineno-10-4"></a><span class="p">&gt;</span> <span class="p">@(</span><span class="n">1</span><span class="p">..</span><span class="n">2</span><span class="p">)</span> <span class="p">|</span> <span class="p">%</span> <span class="p">{</span> <span class="nv">$a</span> <span class="p">=</span> <span class="s2">&quot;a&quot;</span> <span class="p">*</span> <span class="nv">$_</span><span class="p">;</span> <span class="p">@(</span><span class="nv">$a</span><span class="p">,</span><span class="nv">$_</span><span class="p">)</span> <span class="p">}</span> <span class="p">|</span> <span class="nb">Get-Member</span> <span class="n">-name</span> <span class="n">GetType</span>
</span><span id="__span-10-5"><a id="__codelineno-10-5" name="__codelineno-10-5" href="#__codelineno-10-5"></a><span class="p">&gt;</span> <span class="p">@(</span><span class="n">1</span><span class="p">..</span><span class="n">2</span><span class="p">)</span> <span class="p">|</span> <span class="p">%</span> <span class="p">{</span> <span class="nv">$a</span> <span class="p">=</span> <span class="s2">&quot;a&quot;</span> <span class="p">*</span> <span class="nv">$_</span><span class="p">;</span> <span class="p">,@(</span><span class="nv">$a</span><span class="p">,</span><span class="nv">$_</span><span class="p">)</span> <span class="p">}</span> <span class="p">|</span> <span class="nb">Get-Member</span> <span class="n">-name</span> <span class="n">GetType</span>
</span><span id="__span-10-6"><a id="__codelineno-10-6" name="__codelineno-10-6" href="#__codelineno-10-6"></a><span class="c"># Get-Member only shows output for every distinct type</span>
</span></code></pre></div></p>
<h3 id="longer-read"><a class="toclink" href="../../2024/06/24/powershell-quirk/#longer-read">Longer read</a></h3>
<p>Occasionally I have a fist fight with PS to return an Array instead of one element at a time. PS is a tough oponent. I think I get it now though.</p>
<p>The comma <code>,</code> in PS is a binary and unary operator. You can use it with a single or 2 arguments.
<div class="language-PowerShell highlight"><pre><span></span><code><span id="__span-11-1"><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a><span class="p">&gt;</span> <span class="p">,</span><span class="n">1</span> <span class="c"># as an unary operator the comma creates an array with 1 member</span>
</span><span id="__span-11-2"><a id="__codelineno-11-2" name="__codelineno-11-2" href="#__codelineno-11-2"></a><span class="n">1</span>
</span><span id="__span-11-3"><a id="__codelineno-11-3" name="__codelineno-11-3" href="#__codelineno-11-3"></a><span class="p">&gt;</span> <span class="n">1</span><span class="p">,</span><span class="n">2</span> <span class="c"># as an binary operator the comma creates an array with 2 members</span>
</span><span id="__span-11-4"><a id="__codelineno-11-4" name="__codelineno-11-4" href="#__codelineno-11-4"></a><span class="n">1</span>
</span><span id="__span-11-5"><a id="__codelineno-11-5" name="__codelineno-11-5" href="#__codelineno-11-5"></a><span class="n">2</span>
</span></code></pre></div></p>
<p>Beware that both an array[] and array[][] will be displayed the same way. <code>$y</code> is an array[][], it is printed the same way to the output as <code>$x</code>
<div class="language-PowerShell highlight"><pre><span></span><code><span id="__span-12-1"><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a><span class="p">&gt;</span> <span class="nv">$x</span> <span class="p">=</span> <span class="p">@(</span><span class="n">1</span><span class="p">,</span><span class="n">2</span><span class="p">,</span><span class="n">3</span><span class="p">,</span><span class="n">4</span><span class="p">)</span> <span class="p">;</span> <span class="nv">$x</span><span class="p">.</span><span class="n">GetType</span><span class="p">().</span><span class="n">Name</span> <span class="p">;</span> <span class="nv">$x</span><span class="p">[</span><span class="n">0</span><span class="p">].</span><span class="n">GetType</span><span class="p">().</span><span class="n">Name</span> <span class="p">;</span> <span class="nv">$x</span>
</span><span id="__span-12-2"><a id="__codelineno-12-2" name="__codelineno-12-2" href="#__codelineno-12-2"></a><span class="n">Object</span><span class="p">[]</span>
</span><span id="__span-12-3"><a id="__codelineno-12-3" name="__codelineno-12-3" href="#__codelineno-12-3"></a><span class="n">Int32</span>
</span><span id="__span-12-4"><a id="__codelineno-12-4" name="__codelineno-12-4" href="#__codelineno-12-4"></a><span class="n">1</span>
</span><span id="__span-12-5"><a id="__codelineno-12-5" name="__codelineno-12-5" href="#__codelineno-12-5"></a><span class="n">2</span>
</span><span id="__span-12-6"><a id="__codelineno-12-6" name="__codelineno-12-6" href="#__codelineno-12-6"></a><span class="n">3</span>
</span><span id="__span-12-7"><a id="__codelineno-12-7" name="__codelineno-12-7" href="#__codelineno-12-7"></a><span class="n">4</span>
</span><span id="__span-12-8"><a id="__codelineno-12-8" name="__codelineno-12-8" href="#__codelineno-12-8"></a><span class="p">&gt;</span> <span class="nv">$y</span> <span class="p">=</span> <span class="p">@((</span><span class="n">1</span><span class="p">,</span><span class="n">2</span><span class="p">),(</span><span class="n">3</span><span class="p">,</span><span class="n">4</span><span class="p">))</span> <span class="p">;</span> <span class="nv">$y</span><span class="p">.</span><span class="n">GetType</span><span class="p">().</span><span class="n">Name</span> <span class="p">;</span> <span class="nv">$y</span><span class="p">[</span><span class="n">0</span><span class="p">].</span><span class="n">GetType</span><span class="p">().</span><span class="n">Name</span> <span class="p">;</span> <span class="nv">$y</span>
</span><span id="__span-12-9"><a id="__codelineno-12-9" name="__codelineno-12-9" href="#__codelineno-12-9"></a><span class="n">Object</span><span class="p">[]</span>
</span><span id="__span-12-10"><a id="__codelineno-12-10" name="__codelineno-12-10" href="#__codelineno-12-10"></a><span class="n">Object</span><span class="p">[]</span>
</span><span id="__span-12-11"><a id="__codelineno-12-11" name="__codelineno-12-11" href="#__codelineno-12-11"></a><span class="n">1</span>
</span><span id="__span-12-12"><a id="__codelineno-12-12" name="__codelineno-12-12" href="#__codelineno-12-12"></a><span class="n">2</span>
</span><span id="__span-12-13"><a id="__codelineno-12-13" name="__codelineno-12-13" href="#__codelineno-12-13"></a><span class="n">3</span>
</span><span id="__span-12-14"><a id="__codelineno-12-14" name="__codelineno-12-14" href="#__codelineno-12-14"></a><span class="n">4</span>
</span></code></pre></div></p>
<p>If you're trying to return an array of pairs:
<div class="language-PowerShell highlight"><pre><span></span><code><span id="__span-13-1"><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a><span class="p">&gt;</span> <span class="p">@(</span><span class="n">1</span><span class="p">..</span><span class="n">2</span><span class="p">)</span> <span class="p">|</span> <span class="p">%</span> <span class="p">{</span> <span class="nv">$a</span> <span class="p">=</span> <span class="s2">&quot;a&quot;</span> <span class="p">*</span> <span class="nv">$_</span><span class="p">;</span> <span class="p">@(</span><span class="nv">$a</span><span class="p">,</span><span class="nv">$_</span><span class="p">)</span> <span class="p">}</span> <span class="c"># wrong</span>
</span><span id="__span-13-2"><a id="__codelineno-13-2" name="__codelineno-13-2" href="#__codelineno-13-2"></a><span class="n">a</span>
</span><span id="__span-13-3"><a id="__codelineno-13-3" name="__codelineno-13-3" href="#__codelineno-13-3"></a><span class="n">1</span>
</span><span id="__span-13-4"><a id="__codelineno-13-4" name="__codelineno-13-4" href="#__codelineno-13-4"></a><span class="n">aa</span>
</span><span id="__span-13-5"><a id="__codelineno-13-5" name="__codelineno-13-5" href="#__codelineno-13-5"></a><span class="n">2</span>
</span><span id="__span-13-6"><a id="__codelineno-13-6" name="__codelineno-13-6" href="#__codelineno-13-6"></a><span class="p">&gt;</span> <span class="p">@(</span><span class="n">1</span><span class="p">..</span><span class="n">2</span><span class="p">)</span> <span class="p">|</span> <span class="p">%</span> <span class="p">{</span> <span class="nv">$a</span> <span class="p">=</span> <span class="s2">&quot;a&quot;</span> <span class="p">*</span> <span class="nv">$_</span><span class="p">;</span> <span class="p">,@(</span><span class="nv">$a</span><span class="p">,</span><span class="nv">$_</span><span class="p">)</span> <span class="p">}</span> <span class="c"># correct!</span>
</span><span id="__span-13-7"><a id="__codelineno-13-7" name="__codelineno-13-7" href="#__codelineno-13-7"></a><span class="n">a</span>
</span><span id="__span-13-8"><a id="__codelineno-13-8" name="__codelineno-13-8" href="#__codelineno-13-8"></a><span class="n">1</span>
</span><span id="__span-13-9"><a id="__codelineno-13-9" name="__codelineno-13-9" href="#__codelineno-13-9"></a><span class="n">aa</span>
</span><span id="__span-13-10"><a id="__codelineno-13-10" name="__codelineno-13-10" href="#__codelineno-13-10"></a><span class="n">2</span>
</span><span id="__span-13-11"><a id="__codelineno-13-11" name="__codelineno-13-11" href="#__codelineno-13-11"></a><span class="c"># Even though the result looks like a flat array this this time it&#39;s an array of arrays</span>
</span><span id="__span-13-12"><a id="__codelineno-13-12" name="__codelineno-13-12" href="#__codelineno-13-12"></a><span class="p">&gt;</span> <span class="p">@(</span><span class="n">1</span><span class="p">..</span><span class="n">2</span><span class="p">)</span> <span class="p">|</span> <span class="p">%</span> <span class="p">{</span> <span class="nv">$a</span> <span class="p">=</span> <span class="s2">&quot;a&quot;</span> <span class="p">*</span> <span class="nv">$_</span><span class="p">;</span> <span class="p">@(</span><span class="nv">$a</span><span class="p">,</span><span class="nv">$_</span><span class="p">)</span> <span class="p">}</span> <span class="p">|</span> <span class="nb">Get-Member</span> <span class="n">-name</span> <span class="n">GetType</span> <span class="c"># we get strings and ints</span>
</span><span id="__span-13-13"><a id="__codelineno-13-13" name="__codelineno-13-13" href="#__codelineno-13-13"></a>
</span><span id="__span-13-14"><a id="__codelineno-13-14" name="__codelineno-13-14" href="#__codelineno-13-14"></a>   <span class="n">TypeName</span><span class="p">:</span> <span class="n">System</span><span class="p">.</span><span class="n">String</span>
</span><span id="__span-13-15"><a id="__codelineno-13-15" name="__codelineno-13-15" href="#__codelineno-13-15"></a>
</span><span id="__span-13-16"><a id="__codelineno-13-16" name="__codelineno-13-16" href="#__codelineno-13-16"></a><span class="n">Name</span>    <span class="n">MemberType</span> <span class="n">Definition</span>
</span><span id="__span-13-17"><a id="__codelineno-13-17" name="__codelineno-13-17" href="#__codelineno-13-17"></a><span class="p">----</span>    <span class="p">----------</span> <span class="p">----------</span>
</span><span id="__span-13-18"><a id="__codelineno-13-18" name="__codelineno-13-18" href="#__codelineno-13-18"></a><span class="n">GetType</span> <span class="n">Method</span>     <span class="nb">type </span><span class="n">GetType</span><span class="p">()</span>
</span><span id="__span-13-19"><a id="__codelineno-13-19" name="__codelineno-13-19" href="#__codelineno-13-19"></a>
</span><span id="__span-13-20"><a id="__codelineno-13-20" name="__codelineno-13-20" href="#__codelineno-13-20"></a>   <span class="n">TypeName</span><span class="p">:</span> <span class="n">System</span><span class="p">.</span><span class="n">Int32</span>
</span><span id="__span-13-21"><a id="__codelineno-13-21" name="__codelineno-13-21" href="#__codelineno-13-21"></a>
</span><span id="__span-13-22"><a id="__codelineno-13-22" name="__codelineno-13-22" href="#__codelineno-13-22"></a><span class="n">Name</span>    <span class="n">MemberType</span> <span class="n">Definition</span>
</span><span id="__span-13-23"><a id="__codelineno-13-23" name="__codelineno-13-23" href="#__codelineno-13-23"></a><span class="p">----</span>    <span class="p">----------</span> <span class="p">----------</span>
</span><span id="__span-13-24"><a id="__codelineno-13-24" name="__codelineno-13-24" href="#__codelineno-13-24"></a><span class="n">GetType</span> <span class="n">Method</span>     <span class="nb">type </span><span class="n">GetType</span><span class="p">()</span>
</span><span id="__span-13-25"><a id="__codelineno-13-25" name="__codelineno-13-25" href="#__codelineno-13-25"></a>
</span><span id="__span-13-26"><a id="__codelineno-13-26" name="__codelineno-13-26" href="#__codelineno-13-26"></a><span class="p">&gt;</span> <span class="p">@(</span><span class="n">1</span><span class="p">..</span><span class="n">2</span><span class="p">)</span> <span class="p">|</span> <span class="p">%</span> <span class="p">{</span> <span class="nv">$a</span> <span class="p">=</span> <span class="s2">&quot;a&quot;</span> <span class="p">*</span> <span class="nv">$_</span><span class="p">;</span> <span class="p">,@(</span><span class="nv">$a</span><span class="p">,</span><span class="nv">$_</span><span class="p">)</span> <span class="p">}</span> <span class="p">|</span> <span class="nb">Get-Member</span> <span class="n">-name</span> <span class="n">GetType</span> <span class="c"># we get arrays</span>
</span><span id="__span-13-27"><a id="__codelineno-13-27" name="__codelineno-13-27" href="#__codelineno-13-27"></a>
</span><span id="__span-13-28"><a id="__codelineno-13-28" name="__codelineno-13-28" href="#__codelineno-13-28"></a>   <span class="n">TypeName</span><span class="p">:</span> <span class="n">System</span><span class="p">.</span><span class="n">Object</span><span class="p">[]</span>
</span><span id="__span-13-29"><a id="__codelineno-13-29" name="__codelineno-13-29" href="#__codelineno-13-29"></a>
</span><span id="__span-13-30"><a id="__codelineno-13-30" name="__codelineno-13-30" href="#__codelineno-13-30"></a><span class="n">Name</span>    <span class="n">MemberType</span> <span class="n">Definition</span>
</span><span id="__span-13-31"><a id="__codelineno-13-31" name="__codelineno-13-31" href="#__codelineno-13-31"></a><span class="p">----</span>    <span class="p">----------</span> <span class="p">----------</span>
</span><span id="__span-13-32"><a id="__codelineno-13-32" name="__codelineno-13-32" href="#__codelineno-13-32"></a><span class="n">GetType</span> <span class="n">Method</span>     <span class="nb">type </span><span class="n">GetType</span><span class="p">()</span>
</span></code></pre></div></p>
<p>More on printing your arrays of pairs:
<div class="language-PowerShell highlight"><pre><span></span><code><span id="__span-14-1"><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a><span class="p">&gt;</span> <span class="p">@(</span><span class="n">1</span><span class="p">..</span><span class="n">4</span><span class="p">)</span> <span class="p">|</span> <span class="p">%</span> <span class="p">{</span> <span class="nv">$a</span> <span class="p">=</span> <span class="s2">&quot;a&quot;</span> <span class="p">*</span> <span class="nv">$_</span><span class="p">;</span> <span class="p">,@(</span><span class="nv">$a</span><span class="p">,</span><span class="nv">$_</span><span class="p">)</span> <span class="p">}</span> <span class="p">|</span> <span class="nb">write-output</span> <span class="c"># write-output will &quot;unwind&quot; your array</span>
</span><span id="__span-14-2"><a id="__codelineno-14-2" name="__codelineno-14-2" href="#__codelineno-14-2"></a><span class="n">a</span>
</span><span id="__span-14-3"><a id="__codelineno-14-3" name="__codelineno-14-3" href="#__codelineno-14-3"></a><span class="n">1</span>
</span><span id="__span-14-4"><a id="__codelineno-14-4" name="__codelineno-14-4" href="#__codelineno-14-4"></a><span class="n">aa</span>
</span><span id="__span-14-5"><a id="__codelineno-14-5" name="__codelineno-14-5" href="#__codelineno-14-5"></a><span class="n">2</span>
</span><span id="__span-14-6"><a id="__codelineno-14-6" name="__codelineno-14-6" href="#__codelineno-14-6"></a><span class="p">&gt;</span> <span class="p">@(</span><span class="n">1</span><span class="p">..</span><span class="n">4</span><span class="p">)</span> <span class="p">|</span> <span class="p">%</span> <span class="p">{</span> <span class="nv">$a</span> <span class="p">=</span> <span class="s2">&quot;a&quot;</span> <span class="p">*</span> <span class="nv">$_</span><span class="p">;</span> <span class="p">,@(</span><span class="nv">$a</span><span class="p">,</span><span class="nv">$_</span><span class="p">)</span> <span class="p">}</span> <span class="p">|</span> <span class="nb">write-host</span>
</span><span id="__span-14-7"><a id="__codelineno-14-7" name="__codelineno-14-7" href="#__codelineno-14-7"></a><span class="n">a</span> <span class="n">1</span>
</span><span id="__span-14-8"><a id="__codelineno-14-8" name="__codelineno-14-8" href="#__codelineno-14-8"></a><span class="n">aa</span> <span class="n">2</span>
</span><span id="__span-14-9"><a id="__codelineno-14-9" name="__codelineno-14-9" href="#__codelineno-14-9"></a><span class="p">&gt;</span> <span class="p">@(</span><span class="n">1</span><span class="p">..</span><span class="n">4</span><span class="p">)</span> <span class="p">|</span> <span class="p">%</span> <span class="p">{</span> <span class="nv">$a</span> <span class="p">=</span> <span class="s2">&quot;a&quot;</span> <span class="p">*</span> <span class="nv">$_</span><span class="p">;</span> <span class="p">,@(</span><span class="nv">$a</span><span class="p">,</span><span class="nv">$_</span><span class="p">)</span> <span class="p">}</span> <span class="p">|</span> <span class="p">%</span> <span class="p">{</span> <span class="nb">write-output</span> <span class="s2">&quot;$_&quot;</span> <span class="p">}</span>
</span><span id="__span-14-10"><a id="__codelineno-14-10" name="__codelineno-14-10" href="#__codelineno-14-10"></a><span class="n">a</span> <span class="n">1</span>
</span><span id="__span-14-11"><a id="__codelineno-14-11" name="__codelineno-14-11" href="#__codelineno-14-11"></a><span class="n">aa</span> <span class="n">2</span>
</span><span id="__span-14-12"><a id="__codelineno-14-12" name="__codelineno-14-12" href="#__codelineno-14-12"></a><span class="p">&gt;</span> <span class="p">@(</span><span class="n">1</span><span class="p">..</span><span class="n">4</span><span class="p">)</span> <span class="p">|</span> <span class="p">%</span> <span class="p">{</span> <span class="nv">$a</span> <span class="p">=</span> <span class="s2">&quot;a&quot;</span> <span class="p">*</span> <span class="nv">$_</span><span class="p">;</span> <span class="p">,@(</span><span class="nv">$a</span><span class="p">,</span><span class="nv">$_</span><span class="p">)</span> <span class="p">}</span> <span class="p">|</span> <span class="nb">write-output</span> <span class="n">-NoEnumerate</span> <span class="c"># returns an array of arrays but it&#39;s printed as if it&#39;s a flat array</span>
</span><span id="__span-14-13"><a id="__codelineno-14-13" name="__codelineno-14-13" href="#__codelineno-14-13"></a><span class="n">a</span>
</span><span id="__span-14-14"><a id="__codelineno-14-14" name="__codelineno-14-14" href="#__codelineno-14-14"></a><span class="n">1</span>
</span><span id="__span-14-15"><a id="__codelineno-14-15" name="__codelineno-14-15" href="#__codelineno-14-15"></a><span class="n">aa</span>
</span><span id="__span-14-16"><a id="__codelineno-14-16" name="__codelineno-14-16" href="#__codelineno-14-16"></a><span class="n">2</span>
</span></code></pre></div></p>
<p>This <a href="https://stackoverflow.com/a/29985418/2377787">https://stackoverflow.com/a/29985418/2377787</a> explains how <code>@()</code> works in PS.</p>
<p><div class="language-PowerShell highlight"><pre><span></span><code><span id="__span-15-1"><a id="__codelineno-15-1" name="__codelineno-15-1" href="#__codelineno-15-1"></a><span class="p">&gt;</span> <span class="nv">$a</span><span class="p">=</span><span class="s1">&#39;A&#39;</span><span class="p">,</span><span class="s1">&#39;B&#39;</span><span class="p">,</span><span class="s1">&#39;C&#39;</span>
</span><span id="__span-15-2"><a id="__codelineno-15-2" name="__codelineno-15-2" href="#__codelineno-15-2"></a><span class="p">&gt;</span> <span class="nv">$b</span><span class="p">=@(</span><span class="nv">$a</span><span class="p">;)</span>
</span><span id="__span-15-3"><a id="__codelineno-15-3" name="__codelineno-15-3" href="#__codelineno-15-3"></a><span class="p">&gt;</span> <span class="nv">$a</span>
</span><span id="__span-15-4"><a id="__codelineno-15-4" name="__codelineno-15-4" href="#__codelineno-15-4"></a><span class="n">A</span>
</span><span id="__span-15-5"><a id="__codelineno-15-5" name="__codelineno-15-5" href="#__codelineno-15-5"></a><span class="n">B</span>
</span><span id="__span-15-6"><a id="__codelineno-15-6" name="__codelineno-15-6" href="#__codelineno-15-6"></a><span class="n">C</span>
</span><span id="__span-15-7"><a id="__codelineno-15-7" name="__codelineno-15-7" href="#__codelineno-15-7"></a><span class="p">&gt;</span> <span class="nv">$b</span>
</span><span id="__span-15-8"><a id="__codelineno-15-8" name="__codelineno-15-8" href="#__codelineno-15-8"></a><span class="n">A</span>
</span><span id="__span-15-9"><a id="__codelineno-15-9" name="__codelineno-15-9" href="#__codelineno-15-9"></a><span class="n">B</span>
</span><span id="__span-15-10"><a id="__codelineno-15-10" name="__codelineno-15-10" href="#__codelineno-15-10"></a><span class="n">C</span>
</span><span id="__span-15-11"><a id="__codelineno-15-11" name="__codelineno-15-11" href="#__codelineno-15-11"></a><span class="p">&gt;</span> <span class="no">[Object]</span><span class="p">::</span><span class="n">ReferenceEquals</span><span class="p">(</span><span class="nv">$a</span><span class="p">,</span> <span class="nv">$b</span><span class="p">)</span>
</span><span id="__span-15-12"><a id="__codelineno-15-12" name="__codelineno-15-12" href="#__codelineno-15-12"></a><span class="n">False</span>
</span></code></pre></div>
Above <code>$a;</code> is understood as <code>$a</code> is a collection, collections should be enumerated and each item is passed to the pipeline. <code>@($a;)</code> sees 3 elements but not the original array and creates an array from the 3 elements. In PS <code>@($collection)</code> creates a copy of <code>$collection</code>. <code>@(,$collection)</code> - creates an array with a single element <code>$collection</code>.</p>
    
  </div>
</article>
      
        <article class="md-post md-post--excerpt">
  <header class="md-post__header">
    
    <div class="md-post__meta md-meta">
      <ul class="md-meta__list">
        <li class="md-meta__item">
          <time datetime="2024-06-17 00:00:00">June 17, 2024</time></li>
        
          <li class="md-meta__item">
            in
            
              <a href="../../category/general-coding/" class="md-meta__link">General coding</a>, 
              <a href="../../category/team-lead/" class="md-meta__link">Team lead</a></li>
        
        
          
          <li class="md-meta__item">
            
              2 min read
            
          </li>
        
      </ul>
      
    </div>
  </header>
  <div class="md-post__content md-typeset">
    <h2 id="it-will-be-great-set-it-up-dont-use-it-remove-it"><a class="toclink" href="../../2024/06/17/it-will-be-great-set-it-up-dont-use-it-remove-it/">It will be great, set it up, don't use it, remove it</a></h2>
<p>2024-05-02</p>
<p>Today, I removed something I allowed to be created despite initially feeling it was redundant.</p>
<p>A year ago, a student found a tool to auto-generate documentation for our internal SDK from code annotations. They proposed embedding this documentation in our Continuous Integration pipeline. Although the idea sounded good on paper, I felt it wouldnt be used by our team. However, the team was enthusiastic.</p>
<p>Everyone in our team has the SDK's git repo on their machine, and we rely on IntelliSense and the code for documentation. It seemed unlikely that we would change our habits since the new documentation wouldnt be easier to use than just using F12 to view the source code.</p>
<p>Despite my doubts, I allowed this feature as the team lead. I had already rejected a few initiatives from that student and didnt want to kill their motivation. I wanted to let them work on something they found interesting. There was a slight chance I was wrong and the documentation might be used.</p>
<p>Today, a year later, I noticed the docs website no longer works. It had been down for some time, and no one noticed because no one used it. I removed any trace of the published documentation.</p>
<p>This made me reflect: was it wrong to allow something to be created that never paid off?</p>
<p>In this case, the investment was small. The gain was that the student got to work on something interesting. So, I think it was right to let our team try it out and remove it once we were certain it wasnt used</p>
    
  </div>
</article>
      
        <article class="md-post md-post--excerpt">
  <header class="md-post__header">
    
    <div class="md-post__meta md-meta">
      <ul class="md-meta__list">
        <li class="md-meta__item">
          <time datetime="2024-05-18 00:00:00">May 18, 2024</time></li>
        
          <li class="md-meta__item">
            in
            
              <a href="../../category/certificates/" class="md-meta__link">certificates</a>, 
              <a href="../../category/keys/" class="md-meta__link">keys</a>, 
              <a href="../../category/ssl/" class="md-meta__link">SSL</a>, 
              <a href="../../category/https/" class="md-meta__link">HTTPS</a></li>
        
        
          
          <li class="md-meta__item">
            
              5 min read
            
          </li>
        
      </ul>
      
    </div>
  </header>
  <div class="md-post__content md-typeset">
    <h2 id="notes-on-keys-certs-certificates-https-ssl-ssh-tls"><a class="toclink" href="../../2024/05/18/notes-on-keys-certs-certificates-https-ssl-ssh-tls/">Notes on keys, certs, certificates, HTTPS, SSL, SSH, TLS</a></h2>
<p>key != cert (a key is different from a certificate)</p>
<p>Keys are used to encrypt connections, certs are used to verify that the key owner is who he says he is.</p>
<h3 id="certificate-aka-cert"><a class="toclink" href="../../2024/05/18/notes-on-keys-certs-certificates-https-ssl-ssh-tls/#certificate-aka-cert">Certificate aka cert</a></h3>
<p>A certificate proves that a public key belongs to a given entity.
The cert includes:</p>
<ul>
<li>public key</li>
<li>information about the key</li>
<li>CA's signature validating the cert</li>
</ul>
<p>CA's signature basically says "I confirm that this public key belongs to this person/entity". The signature is made using CA's private key.</p>
<p>This is wikipedia certificate which I've exported from my chrome browser. This is the certificate in PEM format.</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-4-1"><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a>-----BEGIN CERTIFICATE-----
</span><span id="__span-4-2"><a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a>MIIISzCCB9GgAwIBAgIQB0GeOVg6THbPHqFDR/pfOjAKBggqhkjOPQQDAzBWMQsw
</span><span id="__span-4-3"><a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a>CQYDVQQGEwJVUzEVMBMGA1UEChMMRGlnaUNlcnQgSW5jMTAwLgYDVQQDEydEaWdp
</span><span id="__span-4-4"><a id="__codelineno-4-4" name="__codelineno-4-4" href="#__codelineno-4-4"></a>Q2VydCBUTFMgSHlicmlkIEVDQyBTSEEzODQgMjAyMCBDQTEwHhcNMjMxMDE4MDAw
</span><span id="__span-4-5"><a id="__codelineno-4-5" name="__codelineno-4-5" href="#__codelineno-4-5"></a>MDAwWhcNMjQxMDE2MjM1OTU5WjB5MQswCQYDVQQGEwJVUzETMBEGA1UECBMKQ2Fs
</span><span id="__span-4-6"><a id="__codelineno-4-6" name="__codelineno-4-6" href="#__codelineno-4-6"></a>aWZvcm5pYTEWMBQGA1UEBxMNU2FuIEZyYW5jaXNjbzEjMCEGA1UEChMaV2lraW1l
</span><span id="__span-4-7"><a id="__codelineno-4-7" name="__codelineno-4-7" href="#__codelineno-4-7"></a>ZGlhIEZvdW5kYXRpb24sIEluYy4xGDAWBgNVBAMMDyoud2lraXBlZGlhLm9yZzBZ
</span><span id="__span-4-8"><a id="__codelineno-4-8" name="__codelineno-4-8" href="#__codelineno-4-8"></a>MBMGByqGSM49AgEGCCqGSM49AwEHA0IABDVh9CEa/2rEO/oGR8YZbr5wOPHcFrG8
</span><span id="__span-4-9"><a id="__codelineno-4-9" name="__codelineno-4-9" href="#__codelineno-4-9"></a>OBQS1BQrHAsxgVn1Z/bnKtE8Hvqup+0GXdZvXYlMa8iw4A+Dz/XTitqjggZcMIIG
</span><span id="__span-4-10"><a id="__codelineno-4-10" name="__codelineno-4-10" href="#__codelineno-4-10"></a>WDAfBgNVHSMEGDAWgBQKvAgpF4ylOW16Ds4zxy6z7fvDejAdBgNVHQ4EFgQUyqwM
</span><span id="__span-4-11"><a id="__codelineno-4-11" name="__codelineno-4-11" href="#__codelineno-4-11"></a>Z6LjhkM/u0PnQdmhhzp43TMwggLtBgNVHREEggLkMIIC4IIPKi53aWtpcGVkaWEu
</span><span id="__span-4-12"><a id="__codelineno-4-12" name="__codelineno-4-12" href="#__codelineno-4-12"></a>b3Jngg13aWtpbWVkaWEub3Jngg1tZWRpYXdpa2kub3Jngg13aWtpYm9va3Mub3Jn
</span><span id="__span-4-13"><a id="__codelineno-4-13" name="__codelineno-4-13" href="#__codelineno-4-13"></a>ggx3aWtpZGF0YS5vcmeCDHdpa2luZXdzLm9yZ4INd2lraXF1b3RlLm9yZ4IOd2lr
</span><span id="__span-4-14"><a id="__codelineno-4-14" name="__codelineno-4-14" href="#__codelineno-4-14"></a>aXNvdXJjZS5vcmeCD3dpa2l2ZXJzaXR5Lm9yZ4IOd2lraXZveWFnZS5vcmeCDndp
</span><span id="__span-4-15"><a id="__codelineno-4-15" name="__codelineno-4-15" href="#__codelineno-4-15"></a>a3Rpb25hcnkub3Jnghd3aWtpbWVkaWFmb3VuZGF0aW9uLm9yZ4IGdy53aWtpghJ3
</span><span id="__span-4-16"><a id="__codelineno-4-16" name="__codelineno-4-16" href="#__codelineno-4-16"></a>bWZ1c2VyY29udGVudC5vcmeCESoubS53aWtpcGVkaWEub3Jngg8qLndpa2ltZWRp
</span><span id="__span-4-17"><a id="__codelineno-4-17" name="__codelineno-4-17" href="#__codelineno-4-17"></a>YS5vcmeCESoubS53aWtpbWVkaWEub3JnghYqLnBsYW5ldC53aWtpbWVkaWEub3Jn
</span><span id="__span-4-18"><a id="__codelineno-4-18" name="__codelineno-4-18" href="#__codelineno-4-18"></a>gg8qLm1lZGlhd2lraS5vcmeCESoubS5tZWRpYXdpa2kub3Jngg8qLndpa2lib29r
</span><span id="__span-4-19"><a id="__codelineno-4-19" name="__codelineno-4-19" href="#__codelineno-4-19"></a>cy5vcmeCESoubS53aWtpYm9va3Mub3Jngg4qLndpa2lkYXRhLm9yZ4IQKi5tLndp
</span><span id="__span-4-20"><a id="__codelineno-4-20" name="__codelineno-4-20" href="#__codelineno-4-20"></a>a2lkYXRhLm9yZ4IOKi53aWtpbmV3cy5vcmeCECoubS53aWtpbmV3cy5vcmeCDyou
</span><span id="__span-4-21"><a id="__codelineno-4-21" name="__codelineno-4-21" href="#__codelineno-4-21"></a>d2lraXF1b3RlLm9yZ4IRKi5tLndpa2lxdW90ZS5vcmeCECoud2lraXNvdXJjZS5v
</span><span id="__span-4-22"><a id="__codelineno-4-22" name="__codelineno-4-22" href="#__codelineno-4-22"></a>cmeCEioubS53aWtpc291cmNlLm9yZ4IRKi53aWtpdmVyc2l0eS5vcmeCEyoubS53
</span><span id="__span-4-23"><a id="__codelineno-4-23" name="__codelineno-4-23" href="#__codelineno-4-23"></a>aWtpdmVyc2l0eS5vcmeCECoud2lraXZveWFnZS5vcmeCEioubS53aWtpdm95YWdl
</span><span id="__span-4-24"><a id="__codelineno-4-24" name="__codelineno-4-24" href="#__codelineno-4-24"></a>Lm9yZ4IQKi53aWt0aW9uYXJ5Lm9yZ4ISKi5tLndpa3Rpb25hcnkub3JnghkqLndp
</span><span id="__span-4-25"><a id="__codelineno-4-25" name="__codelineno-4-25" href="#__codelineno-4-25"></a>a2ltZWRpYWZvdW5kYXRpb24ub3JnghQqLndtZnVzZXJjb250ZW50Lm9yZ4INd2lr
</span><span id="__span-4-26"><a id="__codelineno-4-26" name="__codelineno-4-26" href="#__codelineno-4-26"></a>aXBlZGlhLm9yZ4IRd2lraWZ1bmN0aW9ucy5vcmeCEyoud2lraWZ1bmN0aW9ucy5v
</span><span id="__span-4-27"><a id="__codelineno-4-27" name="__codelineno-4-27" href="#__codelineno-4-27"></a>cmcwPgYDVR0gBDcwNTAzBgZngQwBAgIwKTAnBggrBgEFBQcCARYbaHR0cDovL3d3
</span><span id="__span-4-28"><a id="__codelineno-4-28" name="__codelineno-4-28" href="#__codelineno-4-28"></a>dy5kaWdpY2VydC5jb20vQ1BTMA4GA1UdDwEB/wQEAwIDiDAdBgNVHSUEFjAUBggr
</span><span id="__span-4-29"><a id="__codelineno-4-29" name="__codelineno-4-29" href="#__codelineno-4-29"></a>BgEFBQcDAQYIKwYBBQUHAwIwgZsGA1UdHwSBkzCBkDBGoESgQoZAaHR0cDovL2Ny
</span><span id="__span-4-30"><a id="__codelineno-4-30" name="__codelineno-4-30" href="#__codelineno-4-30"></a>bDMuZGlnaWNlcnQuY29tL0RpZ2lDZXJ0VExTSHlicmlkRUNDU0hBMzg0MjAyMENB
</span><span id="__span-4-31"><a id="__codelineno-4-31" name="__codelineno-4-31" href="#__codelineno-4-31"></a>MS0xLmNybDBGoESgQoZAaHR0cDovL2NybDQuZGlnaWNlcnQuY29tL0RpZ2lDZXJ0
</span><span id="__span-4-32"><a id="__codelineno-4-32" name="__codelineno-4-32" href="#__codelineno-4-32"></a>VExTSHlicmlkRUNDU0hBMzg0MjAyMENBMS0xLmNybDCBhQYIKwYBBQUHAQEEeTB3
</span><span id="__span-4-33"><a id="__codelineno-4-33" name="__codelineno-4-33" href="#__codelineno-4-33"></a>MCQGCCsGAQUFBzABhhhodHRwOi8vb2NzcC5kaWdpY2VydC5jb20wTwYIKwYBBQUH
</span><span id="__span-4-34"><a id="__codelineno-4-34" name="__codelineno-4-34" href="#__codelineno-4-34"></a>MAKGQ2h0dHA6Ly9jYWNlcnRzLmRpZ2ljZXJ0LmNvbS9EaWdpQ2VydFRMU0h5YnJp
</span><span id="__span-4-35"><a id="__codelineno-4-35" name="__codelineno-4-35" href="#__codelineno-4-35"></a>ZEVDQ1NIQTM4NDIwMjBDQTEtMS5jcnQwDAYDVR0TAQH/BAIwADCCAYAGCisGAQQB
</span><span id="__span-4-36"><a id="__codelineno-4-36" name="__codelineno-4-36" href="#__codelineno-4-36"></a>1nkCBAIEggFwBIIBbAFqAHcA7s3QZNXbGs7FXLedtM0TojKHRny87N7DUUhZRnEf
</span><span id="__span-4-37"><a id="__codelineno-4-37" name="__codelineno-4-37" href="#__codelineno-4-37"></a>tZsAAAGLQ1J6cgAABAMASDBGAiEA5reeeuLSzGPvJQ5hT3Bd8aOVxmIltXMTLhY6
</span><span id="__span-4-38"><a id="__codelineno-4-38" name="__codelineno-4-38" href="#__codelineno-4-38"></a>19qDGWUCIQDO0LMbF3s42tyxgFIOt7rVOpsHe9Sy0wFQQj8BWO0LIQB2AEiw42va
</span><span id="__span-4-39"><a id="__codelineno-4-39" name="__codelineno-4-39" href="#__codelineno-4-39"></a>pkc0D+VqAvqdMOscUgHLVt0sgdm7v6s52IRzAAABi0NSegEAAAQDAEcwRQIgYJdu
</span><span id="__span-4-40"><a id="__codelineno-4-40" name="__codelineno-4-40" href="#__codelineno-4-40"></a>BrioIun6FTeQhDxqK2eyZehguOkxScS3nwsGSakCIQC1FyuCpm+QQBRJFSTAnStR
</span><span id="__span-4-41"><a id="__codelineno-4-41" name="__codelineno-4-41" href="#__codelineno-4-41"></a>iP+hgGIhgzyZ837usahB0QB3ANq2v2s/tbYin5vCu1xr6HCRcWy7UYSFNL2kPTBI
</span><span id="__span-4-42"><a id="__codelineno-4-42" name="__codelineno-4-42" href="#__codelineno-4-42"></a>1/urAAABi0NSeg8AAAQDAEgwRgIhAOm1GvY8M4V+tUyjV9/PCj8rcWHUOvfY0a/o
</span><span id="__span-4-43"><a id="__codelineno-4-43" name="__codelineno-4-43" href="#__codelineno-4-43"></a>nsKg/bitAiEA1Vm1pP8CDp7hGcQzBBTscpCVebzWCe8DK231mtv97QUwCgYIKoZI
</span><span id="__span-4-44"><a id="__codelineno-4-44" name="__codelineno-4-44" href="#__codelineno-4-44"></a>zj0EAwMDaAAwZQIwKuOOLjmwGgtjG6SASF4W2e8KtQZANRsYXMXJDGwBCi9fM7Qy
</span><span id="__span-4-45"><a id="__codelineno-4-45" name="__codelineno-4-45" href="#__codelineno-4-45"></a>S9dvlFLwrcDg1gxlAjEA5XwJikbpk/qyQerzeUspuZKhqh1KPuj2uBdp8vicuBxu
</span><span id="__span-4-46"><a id="__codelineno-4-46" name="__codelineno-4-46" href="#__codelineno-4-46"></a>TJUd1W+d3LmikOUgGzil
</span><span id="__span-4-47"><a id="__codelineno-4-47" name="__codelineno-4-47" href="#__codelineno-4-47"></a>-----END CERTIFICATE-----
</span></code></pre></div>
<p>We can double click the cert file to view it (on Windows) or use many other different tools to view its content.</p>
<p>https://stackoverflow.com/questions/9758238/how-to-view-the-contents-of-a-pem-certificate</p>
<div class="language-PowerShell highlight"><pre><span></span><code><span id="__span-5-1"><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a><span class="p">&gt;</span> <span class="nv">$cert</span> <span class="p">=</span> <span class="nb">New-Object</span> <span class="n">Security</span><span class="p">.</span><span class="n">Cryptography</span><span class="p">.</span><span class="n">X509Certificates</span><span class="p">.</span><span class="n">X509Certificate2</span><span class="p">(</span><span class="no">[string]</span><span class="s2">&quot;C:\Users\inwen\Downloads\_.wikipedia.org.crt&quot;</span><span class="p">)</span>
</span><span id="__span-5-2"><a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a><span class="p">&gt;</span> <span class="nv">$cert</span> <span class="p">|</span> <span class="nb">select </span><span class="p">*</span>
</span><span id="__span-5-3"><a id="__codelineno-5-3" name="__codelineno-5-3" href="#__codelineno-5-3"></a>
</span><span id="__span-5-4"><a id="__codelineno-5-4" name="__codelineno-5-4" href="#__codelineno-5-4"></a><span class="n">EnhancedKeyUsageList</span> <span class="p">:</span> <span class="p">{</span><span class="n">Server</span> <span class="n">Authentication</span> <span class="p">(</span><span class="n">1</span><span class="p">.</span><span class="n">3</span><span class="p">.</span><span class="n">6</span><span class="p">.</span><span class="n">1</span><span class="p">.</span><span class="n">5</span><span class="p">.</span><span class="n">5</span><span class="p">.</span><span class="n">7</span><span class="p">.</span><span class="n">3</span><span class="p">.</span><span class="n">1</span><span class="p">),</span> <span class="n">Client</span> <span class="n">Authentication</span> <span class="p">(</span><span class="n">1</span><span class="p">.</span><span class="n">3</span><span class="p">.</span><span class="n">6</span><span class="p">.</span><span class="n">1</span><span class="p">.</span><span class="n">5</span><span class="p">.</span><span class="n">5</span><span class="p">.</span><span class="n">7</span><span class="p">.</span><span class="n">3</span><span class="p">.</span><span class="n">2</span><span class="p">)}</span>
</span><span id="__span-5-5"><a id="__codelineno-5-5" name="__codelineno-5-5" href="#__codelineno-5-5"></a><span class="n">DnsNameList</span>          <span class="p">:</span> <span class="p">{*.</span><span class="n">wikipedia</span><span class="p">.</span><span class="n">org</span><span class="p">,</span> <span class="n">wikimedia</span><span class="p">.</span><span class="n">org</span><span class="p">,</span> <span class="n">mediawiki</span><span class="p">.</span><span class="n">org</span><span class="p">,</span> <span class="n">wikibooks</span><span class="p">.</span><span class="n">org</span><span class="p">...}</span>
</span><span id="__span-5-6"><a id="__codelineno-5-6" name="__codelineno-5-6" href="#__codelineno-5-6"></a><span class="n">SendAsTrustedIssuer</span>  <span class="p">:</span> <span class="n">False</span>
</span><span id="__span-5-7"><a id="__codelineno-5-7" name="__codelineno-5-7" href="#__codelineno-5-7"></a><span class="n">Archived</span>             <span class="p">:</span> <span class="n">False</span>
</span><span id="__span-5-8"><a id="__codelineno-5-8" name="__codelineno-5-8" href="#__codelineno-5-8"></a><span class="n">Extensions</span>           <span class="p">:</span> <span class="p">{</span><span class="n">System</span><span class="p">.</span><span class="n">Security</span><span class="p">.</span><span class="n">Cryptography</span><span class="p">.</span><span class="n">Oid</span><span class="p">,</span> <span class="n">System</span><span class="p">.</span><span class="n">Security</span><span class="p">.</span><span class="n">Cryptography</span><span class="p">.</span><span class="n">Oid</span><span class="p">,</span> <span class="n">System</span><span class="p">.</span><span class="n">Security</span><span class="p">.</span><span class="n">Cryptography</span><span class="p">.</span><span class="n">Oid</span><span class="p">,</span> <span class="n">System</span><span class="p">.</span><span class="n">Security</span><span class="p">.</span><span class="n">Cryptography</span><span class="p">.</span><span class="n">Oid</span><span class="p">...}</span>
</span><span id="__span-5-9"><a id="__codelineno-5-9" name="__codelineno-5-9" href="#__codelineno-5-9"></a><span class="n">FriendlyName</span>         <span class="p">:</span>
</span><span id="__span-5-10"><a id="__codelineno-5-10" name="__codelineno-5-10" href="#__codelineno-5-10"></a><span class="n">IssuerName</span>           <span class="p">:</span> <span class="n">System</span><span class="p">.</span><span class="n">Security</span><span class="p">.</span><span class="n">Cryptography</span><span class="p">.</span><span class="n">X509Certificates</span><span class="p">.</span><span class="n">X500DistinguishedName</span>
</span><span id="__span-5-11"><a id="__codelineno-5-11" name="__codelineno-5-11" href="#__codelineno-5-11"></a><span class="n">NotAfter</span>             <span class="p">:</span> <span class="n">17</span><span class="p">/</span><span class="n">10</span><span class="p">/</span><span class="n">2024</span> <span class="n">01</span><span class="p">:</span><span class="n">59</span><span class="p">:</span><span class="n">59</span>
</span><span id="__span-5-12"><a id="__codelineno-5-12" name="__codelineno-5-12" href="#__codelineno-5-12"></a><span class="n">NotBefore</span>            <span class="p">:</span> <span class="n">18</span><span class="p">/</span><span class="n">10</span><span class="p">/</span><span class="n">2023</span> <span class="n">02</span><span class="p">:</span><span class="n">00</span><span class="p">:</span><span class="n">00</span>
</span><span id="__span-5-13"><a id="__codelineno-5-13" name="__codelineno-5-13" href="#__codelineno-5-13"></a><span class="n">HasPrivateKey</span>        <span class="p">:</span> <span class="n">False</span>
</span><span id="__span-5-14"><a id="__codelineno-5-14" name="__codelineno-5-14" href="#__codelineno-5-14"></a><span class="n">PrivateKey</span>           <span class="p">:</span>
</span><span id="__span-5-15"><a id="__codelineno-5-15" name="__codelineno-5-15" href="#__codelineno-5-15"></a><span class="n">PublicKey</span>            <span class="p">:</span> <span class="n">System</span><span class="p">.</span><span class="n">Security</span><span class="p">.</span><span class="n">Cryptography</span><span class="p">.</span><span class="n">X509Certificates</span><span class="p">.</span><span class="n">PublicKey</span>
</span><span id="__span-5-16"><a id="__codelineno-5-16" name="__codelineno-5-16" href="#__codelineno-5-16"></a><span class="n">RawData</span>              <span class="p">:</span> <span class="p">{</span><span class="n">48</span><span class="p">,</span> <span class="n">130</span><span class="p">,</span> <span class="n">8</span><span class="p">,</span> <span class="n">75</span><span class="p">...}</span>
</span><span id="__span-5-17"><a id="__codelineno-5-17" name="__codelineno-5-17" href="#__codelineno-5-17"></a><span class="n">SerialNumber</span>         <span class="p">:</span> <span class="n">07419E39583A4C76CF1EA14347FA5F3A</span>
</span><span id="__span-5-18"><a id="__codelineno-5-18" name="__codelineno-5-18" href="#__codelineno-5-18"></a><span class="n">SubjectName</span>          <span class="p">:</span> <span class="n">System</span><span class="p">.</span><span class="n">Security</span><span class="p">.</span><span class="n">Cryptography</span><span class="p">.</span><span class="n">X509Certificates</span><span class="p">.</span><span class="n">X500DistinguishedName</span>
</span><span id="__span-5-19"><a id="__codelineno-5-19" name="__codelineno-5-19" href="#__codelineno-5-19"></a><span class="n">SignatureAlgorithm</span>   <span class="p">:</span> <span class="n">System</span><span class="p">.</span><span class="n">Security</span><span class="p">.</span><span class="n">Cryptography</span><span class="p">.</span><span class="n">Oid</span>
</span><span id="__span-5-20"><a id="__codelineno-5-20" name="__codelineno-5-20" href="#__codelineno-5-20"></a><span class="n">Thumbprint</span>           <span class="p">:</span> <span class="n">483F0C71F34AE0EA30D99BD60463DCDAA8F49DFB</span>
</span><span id="__span-5-21"><a id="__codelineno-5-21" name="__codelineno-5-21" href="#__codelineno-5-21"></a><span class="n">Version</span>              <span class="p">:</span> <span class="n">3</span>
</span><span id="__span-5-22"><a id="__codelineno-5-22" name="__codelineno-5-22" href="#__codelineno-5-22"></a><span class="n">Handle</span>               <span class="p">:</span> <span class="n">2140299849504</span>
</span><span id="__span-5-23"><a id="__codelineno-5-23" name="__codelineno-5-23" href="#__codelineno-5-23"></a><span class="n">Issuer</span>               <span class="p">:</span> <span class="n">CN</span><span class="p">=</span><span class="n">DigiCert</span> <span class="n">TLS</span> <span class="n">Hybrid</span> <span class="n">ECC</span> <span class="n">SHA384</span> <span class="n">2020</span> <span class="n">CA1</span><span class="p">,</span> <span class="n">O</span><span class="p">=</span><span class="n">DigiCert</span> <span class="n">Inc</span><span class="p">,</span> <span class="n">C</span><span class="p">=</span><span class="n">US</span>
</span><span id="__span-5-24"><a id="__codelineno-5-24" name="__codelineno-5-24" href="#__codelineno-5-24"></a><span class="n">Subject</span>              <span class="p">:</span> <span class="n">CN</span><span class="p">=*.</span><span class="n">wikipedia</span><span class="p">.</span><span class="n">org</span><span class="p">,</span> <span class="n">O</span><span class="p">=</span><span class="s2">&quot;Wikimedia Foundation, Inc.&quot;</span><span class="p">,</span> <span class="n">L</span><span class="p">=</span><span class="n">San</span> <span class="n">Francisco</span><span class="p">,</span> <span class="n">S</span><span class="p">=</span><span class="n">California</span><span class="p">,</span> <span class="n">C</span><span class="p">=</span><span class="n">US</span>
</span></code></pre></div>
<h3 id="ssl-tls-ssh-sftp"><a class="toclink" href="../../2024/05/18/notes-on-keys-certs-certificates-https-ssl-ssh-tls/#ssl-tls-ssh-sftp">SSL &amp; TLS &amp; SSH &amp; SFTP</a></h3>
<p>SSH (Secure SHell protocol) - protocol that allows to execute shell commands over a secure connection.</p>
<p>SFTP is an extension of SSH. SFTP != FTP over SSH.
To connect to a SFTP server you need a private ssh key. The public ssh key (your private key's counterpart) is stored at the server.</p>
<p>TLS &amp; SSL - think of SSL as the older/first protocol for secure communication. SSL was outphased by TLS. TLS is THE protocol used by HTTPS for secure connections.</p>
<p>Clients can be anonymous in TLS - usually the case on web - the server provides a cert to your browser but you don't need a cert of your own.
TLS can be mutual - if the client has a cert the servers will/can validate it.</p>
<h3 id="putty"><a class="toclink" href="../../2024/05/18/notes-on-keys-certs-certificates-https-ssl-ssh-tls/#putty">PuTTy</a></h3>
<p>PuTTy is free+open source software than can do SSH.
PuTTy has its own format of key files -&gt; .ppk</p>
<p>ppk - putty private key (ppk can be changed to pem with some software)
A PPK file stores a private key, and the corresponding public key. Both are contained in the same file.
https://tartarus.org/~simon/putty-snapshots/htmldoc/AppendixC.html</p>
<h2 id="pem"><a class="toclink" href="../../2024/05/18/notes-on-keys-certs-certificates-https-ssl-ssh-tls/#pem">PEM</a></h2>
<p>Privacy-Enhanced Mail (PEM) is THE file format for exhanging keys, certificates.</p>
<ul>
<li><code>.cer</code> &amp; <code>.crt</code> - PEM file with a certificate</li>
<li><code>.key</code> - PEM with with a private or public key</li>
</ul>
<p>The file extensions doesn't really matter. Just open the file and see the headers to be sure what it is.</p>
<p>To view a pem certificate on Windows - rename it to <code>.crt</code> and double click.</p>
<p>You can open a .pem file as plain text as see its content:
<div class="language-text highlight"><pre><span></span><code><span id="__span-6-1"><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a>// pem ignores stuff between the headers so you can put comments here
</span><span id="__span-6-2"><a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a>
</span><span id="__span-6-3"><a id="__codelineno-6-3" name="__codelineno-6-3" href="#__codelineno-6-3"></a>-----BEGIN RSA PRIVATE KEY-----
</span><span id="__span-6-4"><a id="__codelineno-6-4" name="__codelineno-6-4" href="#__codelineno-6-4"></a>izfrNTmQLnfsLzi2Wb9xPz2Qj9fQYGgeug3N2MkDuVHwpPcgkhHkJgCQuuvT+qZI
</span><span id="__span-6-5"><a id="__codelineno-6-5" name="__codelineno-6-5" href="#__codelineno-6-5"></a>MbS2U6wTS24SZk5RunJIUkitRKeWWMS28SLGfkDs1bBYlSPa5smAd3/q1OePi4ae
</span><span id="__span-6-6"><a id="__codelineno-6-6" name="__codelineno-6-6" href="#__codelineno-6-6"></a>dU6YgWuDxzBAKEKVSUu6pA2HOdyQ9N4F1dI+F8w9J990zE93EgyNqZFBBa2L70h4
</span><span id="__span-6-7"><a id="__codelineno-6-7" name="__codelineno-6-7" href="#__codelineno-6-7"></a>M7DrB0gJBWMdUMoxGnun5glLiCMo2JrHZ9RkMiallS1sHMhELx2UAlP8I1+0Mav8
</span><span id="__span-6-8"><a id="__codelineno-6-8" name="__codelineno-6-8" href="#__codelineno-6-8"></a>iMlHGyUW8EJy0paVf09MPpceEcVwDBeX0+G4UQlO551GTFtOSRjcD8U+GkCzka9W
</span><span id="__span-6-9"><a id="__codelineno-6-9" name="__codelineno-6-9" href="#__codelineno-6-9"></a>/SFQrSGe3Gh3SDaOw/4JEMAjWPDLiCglwh0rLIO4VwU6AxzTCuCw3d1ZxQsU6VFQ
</span><span id="__span-6-10"><a id="__codelineno-6-10" name="__codelineno-6-10" href="#__codelineno-6-10"></a>PqHA8haOUATZIrp3886PBThVqALBk9p1Nqn51bXLh13Zy9DZIVx4Z5Ioz/EGuzgR
</span><span id="__span-6-11"><a id="__codelineno-6-11" name="__codelineno-6-11" href="#__codelineno-6-11"></a>d68VW5wybLjYE2r6Q9nHpitSZ4ZderwjIZRes67HdxYFw8unm4Wo6kuGnb5jSSag
</span><span id="__span-6-12"><a id="__codelineno-6-12" name="__codelineno-6-12" href="#__codelineno-6-12"></a>vwBxKzAf3Omn+J6IthTJKuDd13rKZGMcRpQQ6VstwihYt1TahQ/qfJUWPjPcU5ML
</span><span id="__span-6-13"><a id="__codelineno-6-13" name="__codelineno-6-13" href="#__codelineno-6-13"></a>9LkgVwA8Ndi1wp1/sEPe+UlL16L6vO9jUHcueWN7+zSUOE/cDSJyMd9x/ZL8QASA
</span><span id="__span-6-14"><a id="__codelineno-6-14" name="__codelineno-6-14" href="#__codelineno-6-14"></a>ETd5dujVIqlINL2vJKr1o4T+i0RsnpfFiqFmBKlFqww/SKzJeChdyEtpa/dJMrt2
</span><span id="__span-6-15"><a id="__codelineno-6-15" name="__codelineno-6-15" href="#__codelineno-6-15"></a>8S86b6zEmkser+SDYgGketS2DZ4hB+vh2ujSXmS8Gkwrn+BfHMzkbtio8lWbGw0l
</span><span id="__span-6-16"><a id="__codelineno-6-16" name="__codelineno-6-16" href="#__codelineno-6-16"></a>eM1tfdFZ6wMTLkxRhBkBK4JiMiUMvpERyPib6a2L6iXTfH+3RUDS6A==
</span><span id="__span-6-17"><a id="__codelineno-6-17" name="__codelineno-6-17" href="#__codelineno-6-17"></a>-----END RSA PRIVATE KEY-----
</span><span id="__span-6-18"><a id="__codelineno-6-18" name="__codelineno-6-18" href="#__codelineno-6-18"></a>-----BEGIN CERTIFICATE-----
</span><span id="__span-6-19"><a id="__codelineno-6-19" name="__codelineno-6-19" href="#__codelineno-6-19"></a>MIICMzCCAZygAwIBAgIJALiPnVsvq8dsMA0GCSqGSIb3DQEBBQUAMFMxCzAJBgNV
</span><span id="__span-6-20"><a id="__codelineno-6-20" name="__codelineno-6-20" href="#__codelineno-6-20"></a>BAYTAlVTMQwwCgYDVQQIEwNmb28xDDAKBgNVBAcTA2ZvbzEMMAoGA1UEChMDZm9v
</span><span id="__span-6-21"><a id="__codelineno-6-21" name="__codelineno-6-21" href="#__codelineno-6-21"></a>MQwwCgYDVQQLEwNmb28xDDAKBgNVBAMTA2ZvbzAeFw0xMzAzMTkxNTQwMTlaFw0x
</span><span id="__span-6-22"><a id="__codelineno-6-22" name="__codelineno-6-22" href="#__codelineno-6-22"></a>ODAzMTgxNTQwMTlaMFMxCzAJBgNVBAYTAlVTMQwwCgYDVQQIEwNmb28xDDAKBgNV
</span><span id="__span-6-23"><a id="__codelineno-6-23" name="__codelineno-6-23" href="#__codelineno-6-23"></a>BAcTA2ZvbzEMMAoGA1UEChMDZm9vMQwwCgYDVQQLEwNmb28xDDAKBgNVBAMTA2Zv
</span><span id="__span-6-24"><a id="__codelineno-6-24" name="__codelineno-6-24" href="#__codelineno-6-24"></a>bzCBnzANBgkqhkiG9w0BAQEFAAOBjQAwgYkCgYEAzdGfxi9CNbMf1UUcvDQh7MYB
</span><span id="__span-6-25"><a id="__codelineno-6-25" name="__codelineno-6-25" href="#__codelineno-6-25"></a>OveIHyc0E0KIbhjK5FkCBU4CiZrbfHagaW7ZEcN0tt3EvpbOMxxc/ZQU2WN/s/wP
</span><span id="__span-6-26"><a id="__codelineno-6-26" name="__codelineno-6-26" href="#__codelineno-6-26"></a>xph0pSfsfFsTKM4RhTWD2v4fgk+xZiKd1p0+L4hTtpwnEw0uXRVd0ki6muwV5y/P
</span><span id="__span-6-27"><a id="__codelineno-6-27" name="__codelineno-6-27" href="#__codelineno-6-27"></a>+5FHUeldq+pgTcgzuK8CAwEAAaMPMA0wCwYDVR0PBAQDAgLkMA0GCSqGSIb3DQEB
</span><span id="__span-6-28"><a id="__codelineno-6-28" name="__codelineno-6-28" href="#__codelineno-6-28"></a>BQUAA4GBAJiDAAtY0mQQeuxWdzLRzXmjvdSuL9GoyT3BF/jSnpxz5/58dba8pWen
</span><span id="__span-6-29"><a id="__codelineno-6-29" name="__codelineno-6-29" href="#__codelineno-6-29"></a>v3pj4P3w5DoOso0rzkZy2jEsEitlVM2mLSbQpMM+MUVQCQoiG6W9xuCFuxSrwPIS
</span><span id="__span-6-30"><a id="__codelineno-6-30" name="__codelineno-6-30" href="#__codelineno-6-30"></a>pAqEAuV4DNoxQKKWmhVv+J0ptMWD25Pnpxeq5sXzghfJnslJlQND
</span><span id="__span-6-31"><a id="__codelineno-6-31" name="__codelineno-6-31" href="#__codelineno-6-31"></a>-----END CERTIFICATE-----
</span></code></pre></div></p>
<p>Contents between header and footer (<code>-----BEGIN CERTIFICATE-----</code> + <code>-----END CERTIFICATE-----</code>) is base64 encoded. The content can be DER binary data.</p>
<h2 id="der"><a class="toclink" href="../../2024/05/18/notes-on-keys-certs-certificates-https-ssl-ssh-tls/#der">DER</a></h2>
<p>Distinguished Encoding Rules - is a way of encoding data structures. A certificate is a data structure containing various entires like <code>validity date</code>, <code>issuer</code>, etc. For certificates to work you need to store this information and transfer it. DER encodes this information is a binary format. This is then after base64 encoded and then it goes into a PEM file.</p>
<h2 id="x509"><a class="toclink" href="../../2024/05/18/notes-on-keys-certs-certificates-https-ssl-ssh-tls/#x509">X.509</a></h2>
<p>X.509 is the standard defining public key certificates for TLS/SSL (HTTPS)</p>
<h2 id="pfx"><a class="toclink" href="../../2024/05/18/notes-on-keys-certs-certificates-https-ssl-ssh-tls/#pfx">PFX</a></h2>
<p>PFX seems to be Microsoft's complicated file format for storing cryptographic data.</p>
<hr />
<p>base64 offline decoder:
https://www.glezen.org/Base64Decoder.html</p>
<p>Nice description of certs vs key:
https://superuser.com/questions/620121/what-is-the-difference-between-a-certificate-and-a-key-with-respect-to-ssl</p>
<p>Generate yourself a certificate:
https://getacert.com/index.html</p>
<p>Important info on <code>rejectUnauthorized: false</code> and certificates in <code>axios</code>/<code>node</code>:
https://stackoverflow.com/questions/51363855/how-to-configure-axios-to-use-ssl-certificate</p>
<p>convention - propose
    - specify format in secret name
    - use plain - not base64 encoded</p>
<h2 id="lazy-websites"><a class="toclink" href="../../2024/05/18/notes-on-keys-certs-certificates-https-ssl-ssh-tls/#lazy-websites">Lazy websites</a></h2>
<p>Website's certificates are usually signed by intermediate CA, which in turn are signed by a trusted root CA. The idea is that the server you connect to send you its certificate with all the intermediate certificates. Your app/machine should have the root CA certificate stored so it can validate the chain of certificates it received from the server (by just validating the root cert sent with its own root CA).</p>
<p>Some servers are misconfigured and do not send the intermediate certificates. You do not notice because browsers fill in the gaps for a better browsing experience. However when you try to scrape the same website with ex. node your connection will be rejected.</p>
<h3 id="donts-for-node"><a class="toclink" href="../../2024/05/18/notes-on-keys-certs-certificates-https-ssl-ssh-tls/#donts-for-node">don't's (for node)</a></h3>
<p>Several answers on SO suggest:</p>
<ul>
<li><code>NODE_TLS_REJECT_UNAUTHORIZED=0</code> or </li>
<li><code>const httpsAgent = new https.Agent({ rejectUnauthorized: false });</code></li>
</ul>
<p>Both are terrible ideas - they make your app accept unauthorized connections. They are the equivalent of this conversation:</p>
<p>"I can't verify this certificate, we can not be sure who we are connecting to" - says Node with care in its voice</p>
<p>"Doesn't matter, YOLO, carry on" - you reply shrugging your shoulders</p>
<p>Read more <a href="https://stackoverflow.com/a/53585725/2377787">here</a></p>
<h3 id="does-for-node"><a class="toclink" href="../../2024/05/18/notes-on-keys-certs-certificates-https-ssl-ssh-tls/#does-for-node">does (for node)</a></h3>
<p>Use <a href="https://nodejs.org/api/cli.html#node_extra_ca_certsfile">NODE_EXTRA_CA_CERTS</a>. Alternatively use a library to programmatically give node the missing certificate <a href="https://stackoverflow.com/a/39972054/2377787">link</a></p>
<p>Good read - https://stackoverflow.com/questions/31673587/error-unable-to-verify-the-first-certificate-in-nodejs</p>
<h2 id="root-ca-stores"><a class="toclink" href="../../2024/05/18/notes-on-keys-certs-certificates-https-ssl-ssh-tls/#root-ca-stores">root CA stores</a></h2>
<h3 id="node"><a class="toclink" href="../../2024/05/18/notes-on-keys-certs-certificates-https-ssl-ssh-tls/#node">Node</a></h3>
<p>It seems everyone has their own root CA store these days. Nodes has a hardcoded list of root CA see:</p>
<ul>
<li>https://github.com/nodejs/node/blob/main/src/node_root_certs.h</li>
<li>https://github.com/nodejs/node/issues/4175</li>
</ul>
<h3 id="windows"><a class="toclink" href="../../2024/05/18/notes-on-keys-certs-certificates-https-ssl-ssh-tls/#windows">Windows</a></h3>
<p>You can view Windows certificates with PowerShell:
<div class="language-PowerShell highlight"><pre><span></span><code><span id="__span-7-1"><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a><span class="nb">Get-ChildItem</span> <span class="n">-Recurse</span> <span class="n">Cert</span><span class="p">:</span>
</span></code></pre></div></p>
<h3 id="chrome"><a class="toclink" href="../../2024/05/18/notes-on-keys-certs-certificates-https-ssl-ssh-tls/#chrome">Chrome</a></h3>
<p>https://chromium.googlesource.com/chromium/src/+/main/net/data/ssl/chrome_root_store/root_store.md</p>
<p>If you would like to become chrome's trusted CA - https://www.chromium.org/Home/chromium-security/root-ca-policy/</p>
<p>https://blog.chromium.org/2022/09/announcing-launch-of-chrome-root-program.html</p>
    
  </div>
</article>
      
        <article class="md-post md-post--excerpt">
  <header class="md-post__header">
    
    <div class="md-post__meta md-meta">
      <ul class="md-meta__list">
        <li class="md-meta__item">
          <time datetime="2024-05-09 00:00:00">May 9, 2024</time></li>
        
          <li class="md-meta__item">
            in
            
              <a href="../../category/node/" class="md-meta__link">node</a>, 
              <a href="../../category/npm/" class="md-meta__link">npm</a>, 
              <a href="../../category/js/" class="md-meta__link">js</a>, 
              <a href="../../category/dependencies/" class="md-meta__link">dependencies</a></li>
        
        
          
          <li class="md-meta__item">
            
              4 min read
            
          </li>
        
      </ul>
      
    </div>
  </header>
  <div class="md-post__content md-typeset">
    <h2 id="node-packages-updating"><a class="toclink" href="../../2024/05/09/node-packages-updating/">node packages updating</a></h2>
<h3 id="tldr"><a class="toclink" href="../../2024/05/09/node-packages-updating/#tldr">tl;dr</a></h3>
<ol>
<li><code>&gt; npm install depcheck -g</code> - install <code>depcheck</code> globally</li>
<li><code>&gt; depcheck</code> - check for redundant packages</li>
<li><code>&gt; npm un this-redundant-package</code> - uninstall redundant packages (repeat for all redundant packages)</li>
<li>Create a pull-request <code>remove-redundant-packages</code></li>
</ol>
<hr />
<ol>
<li><code>&gt; npm i</code> - make order in <code>node_modules</code></li>
<li><code>&gt; npm audit</code> - see vulnerability issues</li>
<li><code>&gt; npm audit fix</code> - fix vulnerability issues that don't require attention</li>
<li>Create a pull-request <code>fix-vulnerability-issues</code></li>
</ol>
<hr />
<ol>
<li><code>&gt; npm i npm-check-updates -g</code> - install <code>npm-check-updates</code> globally</li>
<li><code>&gt; npm-check-updates</code> - see how outdated packages are</li>
<li><code>&gt; npm outdated</code> - see how outdated packages are</li>
<li><code>&gt; npm update --save</code> - update packages respecting your semver constraints from <code>packages.json</code></li>
<li>If you have packages that use major version <code>0.*.*</code> you'll need to manually update these now<ul>
<li><code>&gt; npm install that-one-package@latest</code></li>
</ul>
</li>
<li>Create a pull-request <code>update-packages-minor</code></li>
</ol>
<hr />
<p>If you're brave and can test/run you project easily:</p>
<ol>
<li><code>ncu -u</code> - updates <code>packages.json</code> to all latest versions as shown by <code>npm-check-updates</code><ul>
<li>this might introduce breaking changes</li>
</ul>
</li>
<li><code>npm i</code> - update <code>package-lock.json</code></li>
<li>Test your project.</li>
<li>Create a pull-request <code>update-packages-major</code></li>
</ol>
<hr />
<p>If you're not brave or can't just YOLO and update all major versions:</p>
<ol>
<li><code>npm-check-updates</code> - check again what is left to update</li>
<li><code>npm i that-package@latest</code> - update major version of of <code>that-package</code></li>
<li>Test your project.<ul>
<li>.js is dynamically typed so you might have just updated a package that breaks your project but you'll not know until you run your code</li>
</ul>
</li>
<li>Repeat for all packages.</li>
<li>Create a pull-request <code>update-packages-major</code></li>
</ol>
<h3 id="longer-read"><a class="toclink" href="../../2024/05/09/node-packages-updating/#longer-read">longer read</a></h3>
<p>Need to update dependencies in a node js project? Here are my notes on this.</p>
<p><code>&gt; npm i</code> (<code>npm install</code>)
<div class="language-text highlight"><pre><span></span><code><span id="__span-5-1"><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a>&gt; npm i
</span><span id="__span-5-2"><a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a>
</span><span id="__span-5-3"><a id="__codelineno-5-3" name="__codelineno-5-3" href="#__codelineno-5-3"></a>added 60 packages, removed 124 packages, changed 191 packages, and audited 522 packages in 13s
</span><span id="__span-5-4"><a id="__codelineno-5-4" name="__codelineno-5-4" href="#__codelineno-5-4"></a>
</span><span id="__span-5-5"><a id="__codelineno-5-5" name="__codelineno-5-5" href="#__codelineno-5-5"></a>96 packages are looking for funding
</span><span id="__span-5-6"><a id="__codelineno-5-6" name="__codelineno-5-6" href="#__codelineno-5-6"></a>  run `npm fund` for details
</span><span id="__span-5-7"><a id="__codelineno-5-7" name="__codelineno-5-7" href="#__codelineno-5-7"></a>
</span><span id="__span-5-8"><a id="__codelineno-5-8" name="__codelineno-5-8" href="#__codelineno-5-8"></a>10 vulnerabilities (2 low, 7 moderate, 1 high)
</span><span id="__span-5-9"><a id="__codelineno-5-9" name="__codelineno-5-9" href="#__codelineno-5-9"></a>
</span><span id="__span-5-10"><a id="__codelineno-5-10" name="__codelineno-5-10" href="#__codelineno-5-10"></a>To address issues that do not require attention, run:
</span><span id="__span-5-11"><a id="__codelineno-5-11" name="__codelineno-5-11" href="#__codelineno-5-11"></a>  npm audit fix
</span><span id="__span-5-12"><a id="__codelineno-5-12" name="__codelineno-5-12" href="#__codelineno-5-12"></a>
</span><span id="__span-5-13"><a id="__codelineno-5-13" name="__codelineno-5-13" href="#__codelineno-5-13"></a>To address all issues possible (including breaking changes), run:
</span><span id="__span-5-14"><a id="__codelineno-5-14" name="__codelineno-5-14" href="#__codelineno-5-14"></a>  npm audit fix --force
</span><span id="__span-5-15"><a id="__codelineno-5-15" name="__codelineno-5-15" href="#__codelineno-5-15"></a>
</span><span id="__span-5-16"><a id="__codelineno-5-16" name="__codelineno-5-16" href="#__codelineno-5-16"></a>Some issues need review, and may require choosing
</span><span id="__span-5-17"><a id="__codelineno-5-17" name="__codelineno-5-17" href="#__codelineno-5-17"></a>a different dependency.
</span><span id="__span-5-18"><a id="__codelineno-5-18" name="__codelineno-5-18" href="#__codelineno-5-18"></a>
</span><span id="__span-5-19"><a id="__codelineno-5-19" name="__codelineno-5-19" href="#__codelineno-5-19"></a>Run `npm audit` for details.
</span></code></pre></div>
- installs missing packages in <code>node_modules</code>
- removes redundant packages in <code>node_modules</code>
- installs correct versions of mismatched packages (if <code>packages-lock.json</code> wants a different version than found in <code>node_modules</code>)
- shows what is going on with packaged in your project</p>
<p><code>&gt; npm audit</code> - shows a report on vulnerability issues in your dependencies</p>
<p><code>&gt; npm audit fix</code> - updates packages to address vulnerability issues (updates that do not require attention)</p>
<p><code>&gt; npm outdated</code> - shows a table with your packages and versions
<div class="language-text highlight"><pre><span></span><code><span id="__span-6-1"><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a>$ npm outdated
</span><span id="__span-6-2"><a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a>Package      Current   Wanted   Latest  Location                  Depended by
</span><span id="__span-6-3"><a id="__codelineno-6-3" name="__codelineno-6-3" href="#__codelineno-6-3"></a>glob          5.0.15   5.0.15    6.0.1  node_modules/glob         dependent-package-name
</span><span id="__span-6-4"><a id="__codelineno-6-4" name="__codelineno-6-4" href="#__codelineno-6-4"></a>nothingness    0.0.3      git      git  node_modules/nothingness  dependent-package-name
</span><span id="__span-6-5"><a id="__codelineno-6-5" name="__codelineno-6-5" href="#__codelineno-6-5"></a>npm            3.5.1    3.5.2    3.5.1  node_modules/npm          dependent-package-name
</span><span id="__span-6-6"><a id="__codelineno-6-6" name="__codelineno-6-6" href="#__codelineno-6-6"></a>local-dev      0.0.3   linked   linked  local-dev                 dependent-package-name
</span><span id="__span-6-7"><a id="__codelineno-6-7" name="__codelineno-6-7" href="#__codelineno-6-7"></a>once           1.3.2    1.3.3    1.3.3  node_modules/once         dependent-package-name
</span></code></pre></div></p>
<ul>
<li><code>Current</code> - what is in <code>nodes_modules</code></li>
<li><code>Wanted</code> - most recent version that respect the version constraint from <code>packages.json</code></li>
<li><code>Latest</code> - latest version from npm registry</li>
</ul>
<p>To update to latest minor+patch versions of your dependencies (<code>Wanted</code>) - <code>npm outdated</code> shows all you need to know but I prefer the output of <code>npm-check-updates</code></p>
<p><code>&gt; npm i npm-check-updates -g</code> (<code>-g</code> -&gt; global mode - package will be available on your whole machine)</p>
<p><code>&gt; npm-check-updates</code> - shows where an update will be a major/minor/patch update (I like the colors)
<div class="language-text highlight"><pre><span></span><code><span id="__span-7-1"><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a>Checking C:\git\blog\package.json
</span><span id="__span-7-2"><a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a>[====================] 39/39 100%
</span><span id="__span-7-3"><a id="__codelineno-7-3" name="__codelineno-7-3" href="#__codelineno-7-3"></a>
</span><span id="__span-7-4"><a id="__codelineno-7-4" name="__codelineno-7-4" href="#__codelineno-7-4"></a> @azure/storage-blob         ^12.5.0        ^12.17.0
</span><span id="__span-7-5"><a id="__codelineno-7-5" name="__codelineno-7-5" href="#__codelineno-7-5"></a> adm-zip                     ^0.4.16         ^0.5.12
</span><span id="__span-7-6"><a id="__codelineno-7-6" name="__codelineno-7-6" href="#__codelineno-7-6"></a> axios                       ^0.27.2          ^1.6.8
</span><span id="__span-7-7"><a id="__codelineno-7-7" name="__codelineno-7-7" href="#__codelineno-7-7"></a> basic-ftp                    ^5.0.1          ^5.0.5
</span><span id="__span-7-8"><a id="__codelineno-7-8" name="__codelineno-7-8" href="#__codelineno-7-8"></a> cheerio                 ^1.0.0-rc.6    ^1.0.0-rc.12
</span><span id="__span-7-9"><a id="__codelineno-7-9" name="__codelineno-7-9" href="#__codelineno-7-9"></a> eslint                      ^8.12.0          ^9.2.0
</span><span id="__span-7-10"><a id="__codelineno-7-10" name="__codelineno-7-10" href="#__codelineno-7-10"></a> eslint-config-prettier       ^8.5.0          ^9.1.0
</span><span id="__span-7-11"><a id="__codelineno-7-11" name="__codelineno-7-11" href="#__codelineno-7-11"></a> eslint-plugin-import        ^2.25.4         ^2.29.1
</span><span id="__span-7-12"><a id="__codelineno-7-12" name="__codelineno-7-12" href="#__codelineno-7-12"></a> fast-xml-parser              ^4.2.4          ^4.3.6
</span><span id="__span-7-13"><a id="__codelineno-7-13" name="__codelineno-7-13" href="#__codelineno-7-13"></a> humanize-duration           ^3.27.3         ^3.32.0
</span><span id="__span-7-14"><a id="__codelineno-7-14" name="__codelineno-7-14" href="#__codelineno-7-14"></a> iconv                        ^3.0.0          ^3.0.1
</span><span id="__span-7-15"><a id="__codelineno-7-15" name="__codelineno-7-15" href="#__codelineno-7-15"></a> jsonwebtoken                 ^9.0.0          ^9.0.2
</span><span id="__span-7-16"><a id="__codelineno-7-16" name="__codelineno-7-16" href="#__codelineno-7-16"></a> luxon                        ^3.4.3          ^3.4.4
</span></code></pre></div></p>
<h4 id="let-us-update-something"><a class="toclink" href="../../2024/05/09/node-packages-updating/#let-us-update-something">Let us update something</a></h4>
<p><code>&gt; npm update</code> - perform updates respecting your semver constraints and update <code>package-lock.json</code></p>
<p><code>&gt; npm update --save</code> - same as above but also update <code>packages.json</code>, use this one always</p>
<p><strong>The behavior for packages with major version <code>0.*.*</code> is different than for versions &gt;=<code>1.0.0</code> (see <code>npm help update</code>)</strong></p>
<p><code>npm update</code> will most likely bump all minor and patch versions for you.</p>
<p>You can run <code>npm update --save</code> often.</p>
<h4 id="what-do-the-symbols-in-packagejson-mean"><a class="toclink" href="../../2024/05/09/node-packages-updating/#what-do-the-symbols-in-packagejson-mean">What do the symbols in <code>package.json</code> mean?</a></h4>
<p>https://stackoverflow.com/questions/22343224/whats-the-difference-between-tilde-and-caret-in-package-json/25861938#25861938</p>
<h4 id="npm-update-save-vs-npm-audit-fix"><a class="toclink" href="../../2024/05/09/node-packages-updating/#npm-update-save-vs-npm-audit-fix"><code>npm update --save</code> vs <code>npm audit fix</code></a></h4>
<p><code>npm audit fix</code> will only update packages to fix vulnerability issues</p>
<p><code>npm update --save</code> will update all packages it can (respecting semver constraints)</p>
<h4 id="do-i-have-unused-dependencies"><a class="toclink" href="../../2024/05/09/node-packages-updating/#do-i-have-unused-dependencies">Do I have unused dependencies?</a></h4>
<p><code>&gt; npm install depcheck -g</code></p>
<p><code>&gt; depcheck</code> - shows unused dependencies.
<code>depcheck</code> scans for <code>require</code>/<code>import</code> statements in your code so you might be utilizing a package differently but <code>depcheck</code> will consider it unused (ex. when you import packages using <code>importLazy</code>).</p>
<h4 id="npm-check"><a class="toclink" href="../../2024/05/09/node-packages-updating/#npm-check">npm-check</a></h4>
<p><code>&gt; npm i npm-check -g</code></p>
<p><code>&gt; npm-check</code> - a different tool to help with dependencies (I didn't use it)</p>
<h4 id="honorable-mentions"><a class="toclink" href="../../2024/05/09/node-packages-updating/#honorable-mentions">honorable mentions</a></h4>
<p><code>&gt; npm ls</code> - list installed packages (from <code>node_modules</code>)</p>
<p><code>&gt; npm ls axios</code> - show all versions of axios and why we have them</p>
<p><code>npm ls</code> will not show you origin of not-installed optional dependencies.</p>
<p>Consider this - you devleop on a <code>win</code> maching and deploy your solution to a <code>linux</code> box.
On windows (see below) you might think <code>node-gyp-build</code> is not used in your solution.
<div class="language-text highlight"><pre><span></span><code><span id="__span-8-1"><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a>&gt; npm ls node-gyp-build
</span><span id="__span-8-2"><a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a>test-npm@1.0.0 C:\git\test-npm
</span><span id="__span-8-3"><a id="__codelineno-8-3" name="__codelineno-8-3" href="#__codelineno-8-3"></a>`-- (empty)
</span></code></pre></div></p>
<p>But on a linux box it will be used:
<div class="language-text highlight"><pre><span></span><code><span id="__span-9-1"><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a>&gt; npm ls node-gyp-build
</span><span id="__span-9-2"><a id="__codelineno-9-2" name="__codelineno-9-2" href="#__codelineno-9-2"></a>npm-test-proj@1.0.0 /git/npm-test-proj
</span><span id="__span-9-3"><a id="__codelineno-9-3" name="__codelineno-9-3" href="#__codelineno-9-3"></a> kafka-lz4-lite@1.0.5
</span><span id="__span-9-4"><a id="__codelineno-9-4" name="__codelineno-9-4" href="#__codelineno-9-4"></a>   piscina@3.2.0
</span><span id="__span-9-5"><a id="__codelineno-9-5" name="__codelineno-9-5" href="#__codelineno-9-5"></a>     nice-napi@1.0.2
</span><span id="__span-9-6"><a id="__codelineno-9-6" name="__codelineno-9-6" href="#__codelineno-9-6"></a>       node-gyp-build@4.8.1
</span></code></pre></div></p>
    
  </div>
</article>
      
        <article class="md-post md-post--excerpt">
  <header class="md-post__header">
    
    <div class="md-post__meta md-meta">
      <ul class="md-meta__list">
        <li class="md-meta__item">
          <time datetime="2024-05-06 00:00:00">May 6, 2024</time></li>
        
          <li class="md-meta__item">
            in
            
              <a href="../../category/node/" class="md-meta__link">node</a>, 
              <a href="../../category/js/" class="md-meta__link">js</a>, 
              <a href="../../category/axios/" class="md-meta__link">axios</a>, 
              <a href="../../category/cookies/" class="md-meta__link">cookies</a></li>
        
        
          
          <li class="md-meta__item">
            
              5 min read
            
          </li>
        
      </ul>
      
    </div>
  </header>
  <div class="md-post__content md-typeset">
    <h2 id="axios-cookies-more"><a class="toclink" href="../../2024/05/06/axios-cookies--more/">axios, cookies &amp; more</a></h2>
<h3 id="axios"><a class="toclink" href="../../2024/05/06/axios-cookies--more/#axios">axios</a></h3>
<p>axios - promise-based HTTP client for node.js</p>
<ul>
<li>when used in node.js axios uses http module (https://nodejs.org/api/http.html)</li>
<li>in node axios <strong>does not</strong> support cookies by itself (https://github.com/axios/axios/issues/5742)<ul>
<li>there are npm packages that add cookies support to axios</li>
</ul>
</li>
<li>when used in browsers it uses XMLHttpRequest</li>
<li>when used in browsers cookies work by default</li>
</ul>
<hr />
<p><em>Why would you use <code>axios</code> over plain <code>http</code> module from node?</em></p>
<blockquote>
<p>Axios makes http requests much easier. Try using plain <code>http</code> and you'll convince your self.</p>
</blockquote>
<hr />
<p><em>Are there other packages like <code>axios</code>?</em></p>
<blockquote>
<p>Yes - for example <code>node-fetch</code> https://github.com/node-fetch/node-fetch</p>
</blockquote>
<hr />
<p>When making a request axios creates a default <code>http</code> and <code>https</code> agent - https://axios-http.com/docs/req_config (axios probably uses <a href="https://nodejs.org/api/http.html#httpglobalagent">global agents</a>). You can specify custom agents for a specific request or set custom agents as default agents to use with an <code>axios</code> instance.</p>
<div class="language-js highlight"><pre><span></span><code><span id="__span-5-1"><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a><span class="kd">const</span><span class="w"> </span><span class="nx">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">require</span><span class="p">(</span><span class="s1">&#39;axios&#39;</span><span class="p">);</span>
</span><span id="__span-5-2"><a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a><span class="kd">const</span><span class="w"> </span><span class="nx">http</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">require</span><span class="p">(</span><span class="s1">&#39;node:http&#39;</span><span class="p">);</span>
</span><span id="__span-5-3"><a id="__codelineno-5-3" name="__codelineno-5-3" href="#__codelineno-5-3"></a>
</span><span id="__span-5-4"><a id="__codelineno-5-4" name="__codelineno-5-4" href="#__codelineno-5-4"></a><span class="p">(</span><span class="k">async</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-5-5"><a id="__codelineno-5-5" name="__codelineno-5-5" href="#__codelineno-5-5"></a><span class="w">    </span><span class="c1">// configure your agent as needed</span>
</span><span id="__span-5-6"><a id="__codelineno-5-6" name="__codelineno-5-6" href="#__codelineno-5-6"></a><span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">myCustomAgent</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">http</span><span class="p">.</span><span class="nx">Agent</span><span class="p">({</span><span class="w"> </span><span class="nx">keepAlive</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="w"> </span><span class="p">});</span>
</span><span id="__span-5-7"><a id="__codelineno-5-7" name="__codelineno-5-7" href="#__codelineno-5-7"></a>
</span><span id="__span-5-8"><a id="__codelineno-5-8" name="__codelineno-5-8" href="#__codelineno-5-8"></a><span class="w">    </span><span class="c1">// use your custom agent for a specific request</span>
</span><span id="__span-5-9"><a id="__codelineno-5-9" name="__codelineno-5-9" href="#__codelineno-5-9"></a><span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">a</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;https://example.com/&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">httpAgent</span><span class="o">:</span><span class="w"> </span><span class="nx">myCustomAgent</span><span class="w"> </span><span class="p">});</span>
</span><span id="__span-5-10"><a id="__codelineno-5-10" name="__codelineno-5-10" href="#__codelineno-5-10"></a><span class="w">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">x</span><span class="p">);</span>
</span><span id="__span-5-11"><a id="__codelineno-5-11" name="__codelineno-5-11" href="#__codelineno-5-11"></a>
</span><span id="__span-5-12"><a id="__codelineno-5-12" name="__codelineno-5-12" href="#__codelineno-5-12"></a><span class="w">    </span><span class="c1">// set you agent as default for all requests</span>
</span><span id="__span-5-13"><a id="__codelineno-5-13" name="__codelineno-5-13" href="#__codelineno-5-13"></a><span class="w">    </span><span class="nx">a</span><span class="p">.</span><span class="k">default</span><span class="p">.</span><span class="nx">httpAgent</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">myCustomAgent</span><span class="p">;</span>
</span><span id="__span-5-14"><a id="__codelineno-5-14" name="__codelineno-5-14" href="#__codelineno-5-14"></a><span class="p">})();</span>
</span></code></pre></div>
<hr />
<p><em>What are <code>http</code>/<code>s</code> agents responsible for?</em></p>
<blockquote>
<p><code>http</code>/<code>s</code> agents handle creating/closing sockets, TCP, etc. They talk to the OS, manage connection to hosts.</p>
</blockquote>
<hr />
<h3 id="cookies"><a class="toclink" href="../../2024/05/06/axios-cookies--more/#cookies">cookies</a></h3>
<p>Without extra packages you need to code reading response headers, look for <code>Set-Cookie</code> headers. Store cookies somewhere. Code adding cookie headers to subsequent request.</p>
<h4 id="http-cookie-agent"><a class="toclink" href="../../2024/05/06/axios-cookies--more/#http-cookie-agent"><code>http-cookie-agent</code></a></h4>
<p>https://www.npmjs.com/package/http-cookie-agent</p>
<p>Manages cookies for node.js HTTP clients (e.g. Node.js global fetch, undici, axios, node-fetch).
<code>http-cookie-agent</code> implements a <code>http</code>/<code>s</code> agent that inspects request headers and does cookie related magic for you. It uses the class <code>CookieJar</code> from package <code>tough-cookie</code> to parse&amp;store cookies.</p>
<div class="language-js highlight"><pre><span></span><code><span id="__span-6-1"><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a><span class="k">import</span><span class="w"> </span><span class="nx">axios</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;axios&#39;</span><span class="p">;</span>
</span><span id="__span-6-2"><a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">CookieJar</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;tough-cookie&#39;</span><span class="p">;</span>
</span><span id="__span-6-3"><a id="__codelineno-6-3" name="__codelineno-6-3" href="#__codelineno-6-3"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">HttpCookieAgent</span><span class="p">,</span><span class="w"> </span><span class="nx">HttpsCookieAgent</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;http-cookie-agent/http&#39;</span><span class="p">;</span>
</span><span id="__span-6-4"><a id="__codelineno-6-4" name="__codelineno-6-4" href="#__codelineno-6-4"></a>
</span><span id="__span-6-5"><a id="__codelineno-6-5" name="__codelineno-6-5" href="#__codelineno-6-5"></a><span class="kd">const</span><span class="w"> </span><span class="nx">jar</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">CookieJar</span><span class="p">();</span>
</span><span id="__span-6-6"><a id="__codelineno-6-6" name="__codelineno-6-6" href="#__codelineno-6-6"></a>
</span><span id="__span-6-7"><a id="__codelineno-6-7" name="__codelineno-6-7" href="#__codelineno-6-7"></a><span class="kd">const</span><span class="w"> </span><span class="nx">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">axios</span><span class="p">.</span><span class="nx">create</span><span class="p">({</span>
</span><span id="__span-6-8"><a id="__codelineno-6-8" name="__codelineno-6-8" href="#__codelineno-6-8"></a><span class="w">  </span><span class="nx">httpAgent</span><span class="o">:</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">HttpCookieAgent</span><span class="p">({</span><span class="w"> </span><span class="nx">cookies</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">jar</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">}),</span>
</span><span id="__span-6-9"><a id="__codelineno-6-9" name="__codelineno-6-9" href="#__codelineno-6-9"></a><span class="w">  </span><span class="nx">httpsAgent</span><span class="o">:</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">HttpsCookieAgent</span><span class="p">({</span><span class="w"> </span><span class="nx">cookies</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">jar</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">}),</span>
</span><span id="__span-6-10"><a id="__codelineno-6-10" name="__codelineno-6-10" href="#__codelineno-6-10"></a><span class="p">});</span>
</span><span id="__span-6-11"><a id="__codelineno-6-11" name="__codelineno-6-11" href="#__codelineno-6-11"></a><span class="c1">// now we have an axios instance supporting cookies</span>
</span><span id="__span-6-12"><a id="__codelineno-6-12" name="__codelineno-6-12" href="#__codelineno-6-12"></a><span class="k">await</span><span class="w"> </span><span class="nx">a</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;https://example.com&#39;</span><span class="p">);</span>
</span></code></pre></div>
<h4 id="axios-cookiejar-support"><a class="toclink" href="../../2024/05/06/axios-cookies--more/#axios-cookiejar-support"><code>axios-cookiejar-support</code></a></h4>
<p>https://www.npmjs.com/package/axios-cookiejar-support</p>
<p>Depends on <code>http-cookie-agent</code> and <code>tough-cookie</code>.
Does the same as <code>http-cookie-agent</code> but you don't have to create <code>http</code>/<code>s</code> agents yourself. This is a small package that just intercepts axios requests and makes sure custom <code>http</code>/<code>s</code> agents are used <a href="https://github.com/3846masa/axios-cookiejar-support/blob/main/src/index.ts">source</a>.</p>
<p>Saves you a bit of typing but you can't use your own custom agents. If you need to configure your <code>http</code>/<code>s</code> agents (ex. with a certificate) - use <code>http-cookie-agent</code> (see <a href="https://github.com/3846masa/axios-cookiejar-support/issues/431">github issue</a> and <a href="https://github.com/3846masa/axios-cookiejar-support/issues/426">github issue</a>)</p>
<div class="language-js highlight"><pre><span></span><code><span id="__span-7-1"><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a><span class="k">import</span><span class="w"> </span><span class="nx">axios</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;axios&#39;</span><span class="p">;</span>
</span><span id="__span-7-2"><a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">wrapper</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;axios-cookiejar-support&#39;</span><span class="p">;</span>
</span><span id="__span-7-3"><a id="__codelineno-7-3" name="__codelineno-7-3" href="#__codelineno-7-3"></a><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">CookieJar</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;tough-cookie&#39;</span><span class="p">;</span>
</span><span id="__span-7-4"><a id="__codelineno-7-4" name="__codelineno-7-4" href="#__codelineno-7-4"></a>
</span><span id="__span-7-5"><a id="__codelineno-7-5" name="__codelineno-7-5" href="#__codelineno-7-5"></a><span class="kd">const</span><span class="w"> </span><span class="nx">jar</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">CookieJar</span><span class="p">();</span>
</span><span id="__span-7-6"><a id="__codelineno-7-6" name="__codelineno-7-6" href="#__codelineno-7-6"></a><span class="kd">const</span><span class="w"> </span><span class="nx">client</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">wrapper</span><span class="p">(</span><span class="nx">axios</span><span class="p">.</span><span class="nx">create</span><span class="p">({</span><span class="w"> </span><span class="nx">jar</span><span class="w"> </span><span class="p">}));</span>
</span><span id="__span-7-7"><a id="__codelineno-7-7" name="__codelineno-7-7" href="#__codelineno-7-7"></a>
</span><span id="__span-7-8"><a id="__codelineno-7-8" name="__codelineno-7-8" href="#__codelineno-7-8"></a><span class="k">await</span><span class="w"> </span><span class="nx">client</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;https://example.com&#39;</span><span class="p">);</span>
</span></code></pre></div>
<h4 id="tough-cookie"><a class="toclink" href="../../2024/05/06/axios-cookies--more/#tough-cookie"><code>tough-cookie</code></a></h4>
<p>https://www.npmjs.com/package/tough-cookie</p>
<p>npm package - cookie parsing/storage/retrieval (<code>tough-cookie</code> itself does nothing with http request).</p>
<h4 id="a-bit-about-cookies"><a class="toclink" href="../../2024/05/06/axios-cookies--more/#a-bit-about-cookies">A bit about cookies</a></h4>
<p>https://datatracker.ietf.org/doc/html/rfc6265 - RFC describing cookies.</p>
<p>https://datatracker.ietf.org/doc/html/rfc6265#page-28 - concise paragraph on Third-party cookies.</p>
<p>Servers responds with a <code>Set-Cookie</code> header. Client can set the requested cookie. Cookies have a specific format described in this document.</p>
<h3 id="random-stuff"><a class="toclink" href="../../2024/05/06/axios-cookies--more/#random-stuff">Random stuff</a></h3>
<p>https://npmtrends.com/cookie-vs-cookiejar-vs-cookies-vs-tough-cookie</p>
<p>interesting - <code>cookie</code> for servers are more popular than <code>tough-cookie</code> for clients since ~2023.</p>
<p>Is this due to more serve side apps being written in node?</p>
<h3 id="packages-we-dont-use"><a class="toclink" href="../../2024/05/06/axios-cookies--more/#packages-we-dont-use">Packages we don't use</a></h3>
<ul>
<li><code>cookie</code> - npm package - cookies for servers</li>
<li><code>cookies</code> - npm package - cookies for servers (different then <code>cookie</code>)</li>
<li><code>cookiejar</code> - npm package - a different cookie jar for clients</li>
</ul>
<h3 id="fetch-fetch-node-fetch"><a class="toclink" href="../../2024/05/06/axios-cookies--more/#fetch-fetch-node-fetch">fetch &amp; <code>fetch</code> &amp; <code>node-fetch</code></a></h3>
<p>fetch - standard created by WHATWG meant to replace <code>XMLHttpRequest</code> - https://fetch.spec.whatwg.org/</p>
<p><code>fetch</code> - an old npm package to fetch web content - don't use it</p>
<p><code>node-fetch</code> - community implemented <code>fetch</code> standard as a npm package - go ahead and use it</p>
<p><code>fetch</code> - node's native implementation of the <code>fetch</code> standard - https://nodejs.org/dist/latest-v21.x/docs/api/globals.html#fetch</p>
<p>Since <code>fetch</code> standard is the standard for both browsers and node chrome has a neat feature to export requests to <code>fetch</code></p>
<h3 id="chat-gpt-crap"><a class="toclink" href="../../2024/05/06/axios-cookies--more/#chat-gpt-crap">chat-gpt crap</a></h3>
<p>When researching I came across some chat-gpt generated content.
You read it thinking it will be something but it's trash.</p>
<p>https://www.dhiwise.com/post/managing-secure-cookies-via-axios-interceptors
-&gt; this article from 2024 that tell you to implement cookies your self, doesn't even mention the word "package", "module"</p>
<p>https://medium.com/@stheodorejohn/managing-cookies-with-axios-simplifying-cookie-based-authentication-911e53c23c8a
-&gt; doesn't mention that cookies don't work in axios run in node without extra packages
    (at least this one mentions that chat-gpt helped, thought I bet it's fully written by chat-gpt)</p>
<hr />
<p>inco note - our http client is misleading, it uses same agent for http and https, it should maybe be called customAgent</p>
<h3 id="axios-and-fiddler"><a class="toclink" href="../../2024/05/06/axios-cookies--more/#axios-and-fiddler">axios and fiddler</a></h3>
<p>Using a request interceptor (proxy) like fiddler helps during development and debugging.</p>
<p>To make fiddler intercept axios request we have to tell axios that there is a proxy where all requests from should go. The proxy forwards those requests to the actual destination.</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-8-1"><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a>http_proxy=... // set proxy for http requests
</span><span id="__span-8-2"><a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a>https_proxy=... // set proxy for https requests
</span><span id="__span-8-3"><a id="__codelineno-8-3" name="__codelineno-8-3" href="#__codelineno-8-3"></a>no_proxy=domain1.com,domain2.com // comma separated list of domains that should not be proxied
</span></code></pre></div>
<p>The proxy for both http and https can be the same url.</p>
<p>Read more - https://axios-http.com/docs/req_config</p>
<p>When using fiddler on windows I suggest going to <code>Network &amp; internet &gt; Proxy</code> and disableing proxies there (fiddler by default sets this). This way <code>fiddler</code> will only receive requests from the process where we set <code>http(s)_proxy</code> env vars.</p>
<h4 id="fiddler-and-client-certificates"><a class="toclink" href="../../2024/05/06/axios-cookies--more/#fiddler-and-client-certificates">fiddler and client certificates</a></h4>
<p>I was not able to make fiddler work with client certificates.
It should be done like this - https://docs.telerik.com/fiddler/configure-fiddler/tasks/respondwithclientcert but I couldn't get it to work</p>
<h3 id="honorable-mentions"><a class="toclink" href="../../2024/05/06/axios-cookies--more/#honorable-mentions">honorable mentions</a></h3>
<p>I would like to try out - https://www.npmjs.com/package/proxy-agent at some point</p>
<p>I don't fully understand <code>withCredentials</code></p>
<h3 id="axios-cookies-demo"><a class="toclink" href="../../2024/05/06/axios-cookies--more/#axios-cookies-demo">axios &amp; cookies demo</a></h3>
<div class="language-text highlight"><pre><span></span><code><span id="__span-9-1"><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a>&gt; npm i
</span><span id="__span-9-2"><a id="__codelineno-9-2" name="__codelineno-9-2" href="#__codelineno-9-2"></a>&gt; node server.mjs
</span><span id="__span-9-3"><a id="__codelineno-9-3" name="__codelineno-9-3" href="#__codelineno-9-3"></a>open browser and go to http://127.0.0.1:3000
</span><span id="__span-9-4"><a id="__codelineno-9-4" name="__codelineno-9-4" href="#__codelineno-9-4"></a>cookies are supported
</span><span id="__span-9-5"><a id="__codelineno-9-5" name="__codelineno-9-5" href="#__codelineno-9-5"></a>&gt; node test.js (from another console)
</span><span id="__span-9-6"><a id="__codelineno-9-6" name="__codelineno-9-6" href="#__codelineno-9-6"></a>cookies are not supported
</span></code></pre></div>
<h3 id="axios-certificates-etc"><a class="toclink" href="../../2024/05/06/axios-cookies--more/#axios-certificates-etc">axios, certificates, etc</a></h3>
<p>To use axios with a client certificate you need to configure the https agent with the key and cert.
the key and cert need to be in pem format. They both can be in the same pem file, or in separate pem files.
(did not try it) but you should be able to merge and split your pem.</p>
<p>https://nodejs.org/api/tls.html#tlscreatesecurecontextoptions</p>
<p>to try out - https://www.npmjs.com/package/proxy-agent</p>
    
  </div>
</article>
      
      
        
          



<nav class="md-pagination">
  
</nav>
        
      
    </div>
  </div>

          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["content.code.copy"], "search": "../../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.ad660dcc.min.js"></script>
      
    
  </body>
</html>